





<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
  <link rel="dns-prefetch" href="https://github.githubassets.com">
  <link rel="dns-prefetch" href="https://avatars0.githubusercontent.com">
  <link rel="dns-prefetch" href="https://avatars1.githubusercontent.com">
  <link rel="dns-prefetch" href="https://avatars2.githubusercontent.com">
  <link rel="dns-prefetch" href="https://avatars3.githubusercontent.com">
  <link rel="dns-prefetch" href="https://github-cloud.s3.amazonaws.com">
  <link rel="dns-prefetch" href="https://user-images.githubusercontent.com/">



  <link crossorigin="anonymous" media="all" integrity="sha512-8B5lvNq1b88YJg2eQ7wXcWwl490xeelSavDDj7NEOtpEK7m0tKkmFi9BDX+S+nYyh/teAumil+CjK/AscuQrdg==" rel="stylesheet" href="https://github.githubassets.com/assets/frameworks-081940cf9af751b35bb9fd062060601a.css" />
  <link crossorigin="anonymous" media="all" integrity="sha512-vozupRTrzo7k2NwiAgC37o0fUpxqBtSeDrVyaxH6I+ed18h/6awTfjJ5uRMyNRb/2rOxZtsTi8FKLv7DVZMZwg==" rel="stylesheet" href="https://github.githubassets.com/assets/site-c24aa206cdd4fb0b962ca6e303f5faca.css" />
    <link crossorigin="anonymous" media="all" integrity="sha512-KOqqPXmPgXnSCDE/RVobSMDp3N81KrS5yqxFG9e6gN2YdLVtBZtRXT/0f3YHTGU2PwyqLmcBdz6bARkVDb4Nhg==" rel="stylesheet" href="https://github.githubassets.com/assets/github-f596d1693f63c9206f4e5d91b1c00078.css" />
    
    
    
    

  <meta name="viewport" content="width=device-width">
  
  <title>citadel/1.js at master · viveksenthilsj/citadel · GitHub</title>
    <meta name="description" content="Contribute to viveksenthilsj/citadel development by creating an account on GitHub.">
    <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="GitHub">
  <link rel="fluid-icon" href="https://github.com/fluidicon.png" title="GitHub">
  <meta property="fb:app_id" content="1401488693436528">

    <meta name="twitter:image:src" content="https://avatars0.githubusercontent.com/u/24869849?s=400&amp;v=4" /><meta name="twitter:site" content="@github" /><meta name="twitter:card" content="summary" /><meta name="twitter:title" content="viveksenthilsj/citadel" /><meta name="twitter:description" content="Contribute to viveksenthilsj/citadel development by creating an account on GitHub." />
    <meta property="og:image" content="https://avatars0.githubusercontent.com/u/24869849?s=400&amp;v=4" /><meta property="og:site_name" content="GitHub" /><meta property="og:type" content="object" /><meta property="og:title" content="viveksenthilsj/citadel" /><meta property="og:url" content="https://github.com/viveksenthilsj/citadel" /><meta property="og:description" content="Contribute to viveksenthilsj/citadel development by creating an account on GitHub." />

  <link rel="assets" href="https://github.githubassets.com/">
  
  <meta name="pjax-timeout" content="1000">
  
  <meta name="request-id" content="BFAE:6966:13B299:1C3670:5D3CB1F9" data-pjax-transient>


  

  <meta name="selected-link" value="repo_source" data-pjax-transient>

      <meta name="google-site-verification" content="KT5gs8h0wvaagLKAVWq8bbeNwnZZK1r1XQysX3xurLU">
    <meta name="google-site-verification" content="ZzhVyEFwb7w3e0-uOTltm8Jsck2F5StVihD0exw2fsA">
    <meta name="google-site-verification" content="GXs5KoUUkNCoaAZn7wPN-t01Pywp9M3sEjnt_3_ZWPc">

  <meta name="octolytics-host" content="collector.githubapp.com" /><meta name="octolytics-app-id" content="github" /><meta name="octolytics-event-url" content="https://collector.githubapp.com/github-external/browser_event" /><meta name="octolytics-dimension-request_id" content="BFAE:6966:13B299:1C3670:5D3CB1F9" /><meta name="octolytics-dimension-region_edge" content="ap-south-1" /><meta name="octolytics-dimension-region_render" content="iad" />
<meta name="analytics-location" content="/&lt;user-name&gt;/&lt;repo-name&gt;/blob/show" data-pjax-transient="true" />



    <meta name="google-analytics" content="UA-3769691-2">


<meta class="js-ga-set" name="dimension1" content="Logged Out">



  

      <meta name="hostname" content="github.com">
    <meta name="user-login" content="">

      <meta name="expected-hostname" content="github.com">
    <meta name="js-proxy-site-detection-payload" content="MjYxNGRlNjA3MDdiMzcxOTkxNGZhZDVhNDg2YjIyZWZhMjkzNDMwZGFhYzQxN2YyZTcyNjcwZmQ0MjcyZjQwOXx7InJlbW90ZV9hZGRyZXNzIjoiMTEzLjE5My4xNDYuMjA4IiwicmVxdWVzdF9pZCI6IkJGQUU6Njk2NjoxM0IyOTk6MUMzNjcwOjVEM0NCMUY5IiwidGltZXN0YW1wIjoxNTY0MjU4ODEzLCJob3N0IjoiZ2l0aHViLmNvbSJ9">

    <meta name="enabled-features" content="MARKETPLACE_FEATURED_BLOG_POSTS,MARKETPLACE_INVOICED_BILLING,MARKETPLACE_SOCIAL_PROOF_CUSTOMERS,MARKETPLACE_TRENDING_SOCIAL_PROOF,MARKETPLACE_RECOMMENDATIONS,MARKETPLACE_PENDING_INSTALLATIONS">

  <meta name="html-safe-nonce" content="5ccc58d21b40a23e3ba8f658a68a106a771e6be0">

  <meta http-equiv="x-pjax-version" content="3c1643205f794dc4e59e8a316923fc4f">
  

      <link href="https://github.com/viveksenthilsj/citadel/commits/master.atom" rel="alternate" title="Recent Commits to citadel:master" type="application/atom+xml">

  <meta name="go-import" content="github.com/viveksenthilsj/citadel git https://github.com/viveksenthilsj/citadel.git">

  <meta name="octolytics-dimension-user_id" content="24869849" /><meta name="octolytics-dimension-user_login" content="viveksenthilsj" /><meta name="octolytics-dimension-repository_id" content="125029590" /><meta name="octolytics-dimension-repository_nwo" content="viveksenthilsj/citadel" /><meta name="octolytics-dimension-repository_public" content="true" /><meta name="octolytics-dimension-repository_is_fork" content="false" /><meta name="octolytics-dimension-repository_network_root_id" content="125029590" /><meta name="octolytics-dimension-repository_network_root_nwo" content="viveksenthilsj/citadel" /><meta name="octolytics-dimension-repository_explore_github_marketplace_ci_cta_shown" content="false" />


    <link rel="canonical" href="https://github.com/viveksenthilsj/citadel/blob/master/1.js" data-pjax-transient>


  <meta name="browser-stats-url" content="https://api.github.com/_private/browser/stats">

  <meta name="browser-errors-url" content="https://api.github.com/_private/browser/errors">

  <link rel="mask-icon" href="https://github.githubassets.com/pinned-octocat.svg" color="#000000">
  <link rel="icon" type="image/x-icon" class="js-site-favicon" href="https://github.githubassets.com/favicon.ico">

<meta name="theme-color" content="#1e2327">





  <link rel="manifest" href="/manifest.json" crossOrigin="use-credentials">

  </head>

  <body class="logged-out env-production page-responsive page-blob">
    

  <div class="position-relative js-header-wrapper ">
    <a href="#start-of-content" tabindex="1" class="px-2 py-4 bg-blue text-white show-on-focus js-skip-to-content">Skip to content</a>
    <div id="js-pjax-loader-bar" class="pjax-loader-bar"><div class="progress"></div></div>

    
    
    


        <header class="Header-old header-logged-out js-details-container Details position-relative f4 py-2" role="banner">
  <div class="container-lg d-lg-flex flex-items-center p-responsive">
    <div class="d-flex flex-justify-between flex-items-center">
        <a class="mr-4" href="https://github.com/" aria-label="Homepage" data-ga-click="(Logged out) Header, go to homepage, icon:logo-wordmark">
          <svg height="32" class="octicon octicon-mark-github text-white" viewBox="0 0 16 16" version="1.1" width="32" aria-hidden="true"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"/></svg>
        </a>

          <div class="d-lg-none css-truncate css-truncate-target width-fit p-2">
            
              <svg class="octicon octicon-repo" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9H3V8h1v1zm0-3H3v1h1V6zm0-2H3v1h1V4zm0-2H3v1h1V2zm8-1v12c0 .55-.45 1-1 1H6v2l-1.5-1.5L3 16v-2H1c-.55 0-1-.45-1-1V1c0-.55.45-1 1-1h10c.55 0 1 .45 1 1zm-1 10H1v2h2v-1h3v1h5v-2zm0-10H2v9h9V1z"/></svg>
    <a class="Header-link" href="/viveksenthilsj">viveksenthilsj</a>
    /
    <a class="Header-link" href="/viveksenthilsj/citadel">citadel</a>


          </div>

        <div class="d-flex flex-items-center">
            <a href="/join?source=header-repo"
              class="d-inline-block d-lg-none f5 text-white no-underline border border-gray-dark rounded-2 px-2 py-1 mr-3 mr-sm-5"
              data-hydro-click="{&quot;event_type&quot;:&quot;authentication.click&quot;,&quot;payload&quot;:{&quot;location_in_page&quot;:&quot;site header&quot;,&quot;repository_id&quot;:null,&quot;auth_type&quot;:&quot;SIGN_UP&quot;,&quot;client_id&quot;:null,&quot;originating_request_id&quot;:&quot;BFAE:6966:13B299:1C3670:5D3CB1F9&quot;,&quot;originating_url&quot;:&quot;https://github.com/viveksenthilsj/citadel/blob/master/1.js&quot;,&quot;referrer&quot;:null,&quot;user_id&quot;:null}}" data-hydro-click-hmac="e0ccaa6794f4db46dc826e375b527ea40f0ef5c12ad3992ae7f0e4332ac08847"
              data-ga-click="(Logged out) Header, clicked Sign up, text:sign-up">
              Sign&nbsp;up
            </a>

          <button class="btn-link d-lg-none mt-1 js-details-target" type="button" aria-label="Toggle navigation" aria-expanded="false">
            <svg height="24" class="octicon octicon-three-bars text-white" viewBox="0 0 12 16" version="1.1" width="18" aria-hidden="true"><path fill-rule="evenodd" d="M11.41 9H.59C0 9 0 8.59 0 8c0-.59 0-1 .59-1H11.4c.59 0 .59.41.59 1 0 .59 0 1-.59 1h.01zm0-4H.59C0 5 0 4.59 0 4c0-.59 0-1 .59-1H11.4c.59 0 .59.41.59 1 0 .59 0 1-.59 1h.01zM.59 11H11.4c.59 0 .59.41.59 1 0 .59 0 1-.59 1H.59C0 13 0 12.59 0 12c0-.59 0-1 .59-1z"/></svg>
          </button>
        </div>
    </div>

    <div class="HeaderMenu HeaderMenu--logged-out position-fixed top-0 right-0 bottom-0 height-fit position-lg-relative d-lg-flex flex-justify-between flex-items-center flex-auto">
      <div class="d-flex d-lg-none flex-justify-end border-bottom bg-gray-light p-3">
        <button class="btn-link js-details-target" type="button" aria-label="Toggle navigation" aria-expanded="false">
          <svg height="24" class="octicon octicon-x text-gray" viewBox="0 0 12 16" version="1.1" width="18" aria-hidden="true"><path fill-rule="evenodd" d="M7.48 8l3.75 3.75-1.48 1.48L6 9.48l-3.75 3.75-1.48-1.48L4.52 8 .77 4.25l1.48-1.48L6 6.52l3.75-3.75 1.48 1.48L7.48 8z"/></svg>
        </button>
      </div>

        <nav class="mt-0 px-3 px-lg-0 mb-5 mb-lg-0" aria-label="Global">
          <ul class="d-lg-flex list-style-none">
              <li class="d-block d-lg-flex flex-lg-nowrap flex-lg-items-center border-bottom border-lg-bottom-0 mr-0 mr-lg-3 edge-item-fix position-relative flex-wrap flex-justify-between d-flex flex-items-center ">
                <details class="HeaderMenu-details details-overlay details-reset width-full">
                  <summary class="HeaderMenu-summary HeaderMenu-link px-0 py-3 border-0 no-wrap d-block d-lg-inline-block">
                    Why GitHub?
                    <svg x="0px" y="0px" viewBox="0 0 14 8" xml:space="preserve" fill="none" class="icon-chevon-down-mktg position-absolute position-lg-relative">
                      <path d="M1,1l6.2,6L13,1"></path>
                    </svg>
                  </summary>
                  <div class="dropdown-menu flex-auto rounded-1 bg-white px-0 mt-0 pb-4 p-lg-4 position-relative position-lg-absolute left-0 left-lg-n4">
                    <a href="/features" class="py-2 lh-condensed-ultra d-block link-gray-dark no-underline h5 Bump-link--hover" data-ga-click="(Logged out) Header, go to Features">Features <span class="Bump-link-symbol float-right text-normal text-gray-light">&rarr;</span></a>
                    <ul class="list-style-none f5 pb-3">
                      <li class="edge-item-fix"><a href="/features/code-review/" class="py-2 lh-condensed-ultra d-block link-gray no-underline f5" data-ga-click="(Logged out) Header, go to Code review">Code review</a></li>
                      <li class="edge-item-fix"><a href="/features/project-management/" class="py-2 lh-condensed-ultra d-block link-gray no-underline f5" data-ga-click="(Logged out) Header, go to Project management">Project management</a></li>
                      <li class="edge-item-fix"><a href="/features/integrations" class="py-2 lh-condensed-ultra d-block link-gray no-underline f5" data-ga-click="(Logged out) Header, go to Integrations">Integrations</a></li>
                      <li class="edge-item-fix"><a href="/features/actions" class="py-2 lh-condensed-ultra d-block link-gray no-underline f5" data-ga-click="(Logged out) Header, go to Actions">Actions</a>
                          <li class="edge-item-fix"><a href="/features/package-registry" class="py-2 lh-condensed-ultra d-block link-gray no-underline f5" data-ga-click="(Logged out) Header, go to Package Registry">Package registry</a>
                      <li class="edge-item-fix"><a href="/features#team-management" class="py-2 lh-condensed-ultra d-block link-gray no-underline f5" data-ga-click="(Logged out) Header, go to Team management">Team management</a></li>
                      <li class="edge-item-fix"><a href="/features#social-coding" class="py-2 lh-condensed-ultra d-block link-gray no-underline f5" data-ga-click="(Logged out) Header, go to Social coding">Social coding</a></li>
                      <li class="edge-item-fix"><a href="/features#documentation" class="py-2 lh-condensed-ultra d-block link-gray no-underline f5" data-ga-click="(Logged out) Header, go to Documentation">Documentation</a></li>
                      <li class="edge-item-fix"><a href="/features#code-hosting" class="py-2 lh-condensed-ultra d-block link-gray no-underline f5" data-ga-click="(Logged out) Header, go to Code hosting">Code hosting</a></li>
                    </ul>

                    <ul class="list-style-none mb-0 border-lg-top pt-lg-3">
                      <li class="edge-item-fix"><a href="/customer-stories" class="py-2 lh-condensed-ultra d-block no-underline link-gray-dark no-underline h5 Bump-link--hover" data-ga-click="(Logged out) Header, go to Customer stories">Customer stories <span class="Bump-link-symbol float-right text-normal text-gray-light">&rarr;</span></a></li>
                      <li class="edge-item-fix"><a href="/security" class="py-2 lh-condensed-ultra d-block no-underline link-gray-dark no-underline h5 Bump-link--hover" data-ga-click="(Logged out) Header, go to Security">Security <span class="Bump-link-symbol float-right text-normal text-gray-light">&rarr;</span></a></li>
                    </ul>
                  </div>
                </details>
              </li>
              <li class="border-bottom border-lg-bottom-0 mr-0 mr-lg-3">
                <a href="/enterprise" class="HeaderMenu-link no-underline py-3 d-block d-lg-inline-block" data-ga-click="(Logged out) Header, go to Enterprise">Enterprise</a>
              </li>

              <li class="d-block d-lg-flex flex-lg-nowrap flex-lg-items-center border-bottom border-lg-bottom-0 mr-0 mr-lg-3 edge-item-fix position-relative flex-wrap flex-justify-between d-flex flex-items-center ">
                <details class="HeaderMenu-details details-overlay details-reset width-full">
                  <summary class="HeaderMenu-summary HeaderMenu-link px-0 py-3 border-0 no-wrap d-block d-lg-inline-block">
                    Explore
                    <svg x="0px" y="0px" viewBox="0 0 14 8" xml:space="preserve" fill="none" class="icon-chevon-down-mktg position-absolute position-lg-relative">
                      <path d="M1,1l6.2,6L13,1"></path>
                    </svg>
                  </summary>

                  <div class="dropdown-menu flex-auto rounded-1 bg-white px-0 pt-2 pb-0 mt-0 pb-4 p-lg-4 position-relative position-lg-absolute left-0 left-lg-n4">
                    <ul class="list-style-none mb-3">
                      <li class="edge-item-fix"><a href="/explore" class="py-2 lh-condensed-ultra d-block link-gray-dark no-underline h5 Bump-link--hover" data-ga-click="(Logged out) Header, go to Explore">Explore GitHub <span class="Bump-link-symbol float-right text-normal text-gray-light">&rarr;</span></a></li>
                    </ul>

                    <h4 class="text-gray-light text-normal text-mono f5 mb-2 border-lg-top pt-lg-3">Learn &amp; contribute</h4>
                    <ul class="list-style-none mb-3">
                      <li class="edge-item-fix"><a href="/topics" class="py-2 lh-condensed-ultra d-block link-gray no-underline f5" data-ga-click="(Logged out) Header, go to Topics">Topics</a></li>
                        <li class="edge-item-fix"><a href="/collections" class="py-2 lh-condensed-ultra d-block link-gray no-underline f5" data-ga-click="(Logged out) Header, go to Collections">Collections</a></li>
                      <li class="edge-item-fix"><a href="/trending" class="py-2 lh-condensed-ultra d-block link-gray no-underline f5" data-ga-click="(Logged out) Header, go to Trending">Trending</a></li>
                      <li class="edge-item-fix"><a href="https://lab.github.com/" class="py-2 lh-condensed-ultra d-block link-gray no-underline f5" data-ga-click="(Logged out) Header, go to Learning lab">Learning Lab</a></li>
                      <li class="edge-item-fix"><a href="https://opensource.guide" class="py-2 lh-condensed-ultra d-block link-gray no-underline f5" data-ga-click="(Logged out) Header, go to Open source guides">Open source guides</a></li>
                    </ul>

                    <h4 class="text-gray-light text-normal text-mono f5 mb-2 border-lg-top pt-lg-3">Connect with others</h4>
                    <ul class="list-style-none mb-0">
                      <li class="edge-item-fix"><a href="https://github.com/events" class="py-2 lh-condensed-ultra d-block link-gray no-underline f5" data-ga-click="(Logged out) Header, go to Events">Events</a></li>
                      <li class="edge-item-fix"><a href="https://github.community" class="py-2 lh-condensed-ultra d-block link-gray no-underline f5" data-ga-click="(Logged out) Header, go to Community forum">Community forum</a></li>
                      <li class="edge-item-fix"><a href="https://education.github.com" class="py-2 pb-0 lh-condensed-ultra d-block link-gray no-underline f5" data-ga-click="(Logged out) Header, go to GitHub Education">GitHub Education</a></li>
                    </ul>
                  </div>
                </details>
              </li>

              <li class="border-bottom border-lg-bottom-0 mr-0 mr-lg-3">
                <a href="/marketplace" class="HeaderMenu-link no-underline py-3 d-block d-lg-inline-block" data-ga-click="(Logged out) Header, go to Marketplace">Marketplace</a>
              </li>

              <li class="d-block d-lg-flex flex-lg-nowrap flex-lg-items-center border-bottom border-lg-bottom-0 mr-0 mr-lg-3 edge-item-fix position-relative flex-wrap flex-justify-between d-flex flex-items-center ">
                <details class="HeaderMenu-details details-overlay details-reset width-full">
                  <summary class="HeaderMenu-summary HeaderMenu-link px-0 py-3 border-0 no-wrap d-block d-lg-inline-block">
                    Pricing
                    <svg x="0px" y="0px" viewBox="0 0 14 8" xml:space="preserve" fill="none" class="icon-chevon-down-mktg position-absolute position-lg-relative">
                       <path d="M1,1l6.2,6L13,1"></path>
                    </svg>
                  </summary>

                  <div class="dropdown-menu flex-auto rounded-1 bg-white px-0 pt-2 pb-4 mt-0 p-lg-4 position-relative position-lg-absolute left-0 left-lg-n4">
                    <a href="/pricing" class="pb-2 lh-condensed-ultra d-block link-gray-dark no-underline h5 Bump-link--hover" data-ga-click="(Logged out) Header, go to Pricing">Plans <span class="Bump-link-symbol float-right text-normal text-gray-light">&rarr;</span></a>

                    <ul class="list-style-none mb-3">
                      <li class="edge-item-fix"><a href="/pricing#feature-comparison" class="py-2 lh-condensed-ultra d-block link-gray no-underline f5" data-ga-click="(Logged out) Header, go to Compare plans">Compare plans</a></li>
                      <li class="edge-item-fix"><a href="https://enterprise.github.com/contact" class="py-2 lh-condensed-ultra d-block link-gray no-underline f5" data-ga-click="(Logged out) Header, go to Contact Sales">Contact Sales</a></li>
                    </ul>

                    <ul class="list-style-none mb-0 border-lg-top pt-lg-3">
                      <li class="edge-item-fix"><a href="/nonprofit" class="py-2 lh-condensed-ultra d-block no-underline link-gray-dark no-underline h5 Bump-link--hover" data-ga-click="(Logged out) Header, go to Nonprofits">Nonprofit <span class="Bump-link-symbol float-right text-normal text-gray-light">&rarr;</span></a></li>
                      <li class="edge-item-fix"><a href="https://education.github.com" class="py-2 pb-0 lh-condensed-ultra d-block no-underline link-gray-dark no-underline h5 Bump-link--hover"  data-ga-click="(Logged out) Header, go to Education">Education <span class="Bump-link-symbol float-right text-normal text-gray-light">&rarr;</span></a></li>
                    </ul>
                  </div>
                </details>
              </li>
          </ul>
        </nav>

      <div class="d-lg-flex flex-items-center px-3 px-lg-0 text-center text-lg-left">
          <div class="d-lg-flex mb-3 mb-lg-0">
            <div class="header-search flex-self-stretch flex-lg-self-auto mr-0 mr-lg-3 mb-3 mb-lg-0 scoped-search site-scoped-search js-site-search position-relative js-jump-to"
  role="combobox"
  aria-owns="jump-to-results"
  aria-label="Search or jump to"
  aria-haspopup="listbox"
  aria-expanded="false"
>
  <div class="position-relative">
    <!-- '"` --><!-- </textarea></xmp> --></option></form><form class="js-site-search-form" role="search" aria-label="Site" data-scope-type="Repository" data-scope-id="125029590" data-scoped-search-url="/viveksenthilsj/citadel/search" data-unscoped-search-url="/search" action="/viveksenthilsj/citadel/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
      <label class="form-control input-sm header-search-wrapper p-0 header-search-wrapper-jump-to position-relative d-flex flex-justify-between flex-items-center js-chromeless-input-container">
        <input type="text"
          class="form-control input-sm header-search-input jump-to-field js-jump-to-field js-site-search-focus js-site-search-field is-clearable"
          data-hotkey="s,/"
          name="q"
          value=""
          placeholder="Search"
          data-unscoped-placeholder="Search GitHub"
          data-scoped-placeholder="Search"
          autocapitalize="off"
          aria-autocomplete="list"
          aria-controls="jump-to-results"
          aria-label="Search"
          data-jump-to-suggestions-path="/_graphql/GetSuggestedNavigationDestinations#csrf-token=lINFwAPjcPq+Yl5fPtz6wT/Q1N4xWJrSWqGt18zbzeNAwQPaUHyVX8xkmoTVfbCEKxKTealhygDxYjfOT5lPug=="
          spellcheck="false"
          autocomplete="off"
          >
          <input type="hidden" class="js-site-search-type-field" name="type" >
            <img src="https://github.githubassets.com/images/search-key-slash.svg" alt="" class="mr-2 header-search-key-slash">

            <div class="Box position-absolute overflow-hidden d-none jump-to-suggestions js-jump-to-suggestions-container">
              
<ul class="d-none js-jump-to-suggestions-template-container">
  

<li class="d-flex flex-justify-start flex-items-center p-0 f5 navigation-item js-navigation-item js-jump-to-suggestion" role="option">
  <a tabindex="-1" class="no-underline d-flex flex-auto flex-items-center jump-to-suggestions-path js-jump-to-suggestion-path js-navigation-open p-2" href="">
    <div class="jump-to-octicon js-jump-to-octicon flex-shrink-0 mr-2 text-center d-none">
      <svg height="16" width="16" class="octicon octicon-repo flex-shrink-0 js-jump-to-octicon-repo d-none" title="Repository" aria-label="Repository" viewBox="0 0 12 16" version="1.1" role="img"><path fill-rule="evenodd" d="M4 9H3V8h1v1zm0-3H3v1h1V6zm0-2H3v1h1V4zm0-2H3v1h1V2zm8-1v12c0 .55-.45 1-1 1H6v2l-1.5-1.5L3 16v-2H1c-.55 0-1-.45-1-1V1c0-.55.45-1 1-1h10c.55 0 1 .45 1 1zm-1 10H1v2h2v-1h3v1h5v-2zm0-10H2v9h9V1z"/></svg>
      <svg height="16" width="16" class="octicon octicon-project flex-shrink-0 js-jump-to-octicon-project d-none" title="Project" aria-label="Project" viewBox="0 0 15 16" version="1.1" role="img"><path fill-rule="evenodd" d="M10 12h3V2h-3v10zm-4-2h3V2H6v8zm-4 4h3V2H2v12zm-1 1h13V1H1v14zM14 0H1a1 1 0 0 0-1 1v14a1 1 0 0 0 1 1h13a1 1 0 0 0 1-1V1a1 1 0 0 0-1-1z"/></svg>
      <svg height="16" width="16" class="octicon octicon-search flex-shrink-0 js-jump-to-octicon-search d-none" title="Search" aria-label="Search" viewBox="0 0 16 16" version="1.1" role="img"><path fill-rule="evenodd" d="M15.7 13.3l-3.81-3.83A5.93 5.93 0 0 0 13 6c0-3.31-2.69-6-6-6S1 2.69 1 6s2.69 6 6 6c1.3 0 2.48-.41 3.47-1.11l3.83 3.81c.19.2.45.3.7.3.25 0 .52-.09.7-.3a.996.996 0 0 0 0-1.41v.01zM7 10.7c-2.59 0-4.7-2.11-4.7-4.7 0-2.59 2.11-4.7 4.7-4.7 2.59 0 4.7 2.11 4.7 4.7 0 2.59-2.11 4.7-4.7 4.7z"/></svg>
    </div>

    <img class="avatar mr-2 flex-shrink-0 js-jump-to-suggestion-avatar d-none" alt="" aria-label="Team" src="" width="28" height="28">

    <div class="jump-to-suggestion-name js-jump-to-suggestion-name flex-auto overflow-hidden text-left no-wrap css-truncate css-truncate-target">
    </div>

    <div class="border rounded-1 flex-shrink-0 bg-gray px-1 text-gray-light ml-1 f6 d-none js-jump-to-badge-search">
      <span class="js-jump-to-badge-search-text-default d-none" aria-label="in this repository">
        In this repository
      </span>
      <span class="js-jump-to-badge-search-text-global d-none" aria-label="in all of GitHub">
        All GitHub
      </span>
      <span aria-hidden="true" class="d-inline-block ml-1 v-align-middle">↵</span>
    </div>

    <div aria-hidden="true" class="border rounded-1 flex-shrink-0 bg-gray px-1 text-gray-light ml-1 f6 d-none d-on-nav-focus js-jump-to-badge-jump">
      Jump to
      <span class="d-inline-block ml-1 v-align-middle">↵</span>
    </div>
  </a>
</li>

</ul>

<ul class="d-none js-jump-to-no-results-template-container">
  <li class="d-flex flex-justify-center flex-items-center f5 d-none js-jump-to-suggestion p-2">
    <span class="text-gray">No suggested jump to results</span>
  </li>
</ul>

<ul id="jump-to-results" role="listbox" class="p-0 m-0 js-navigation-container jump-to-suggestions-results-container js-jump-to-suggestions-results-container">
  

<li class="d-flex flex-justify-start flex-items-center p-0 f5 navigation-item js-navigation-item js-jump-to-scoped-search d-none" role="option">
  <a tabindex="-1" class="no-underline d-flex flex-auto flex-items-center jump-to-suggestions-path js-jump-to-suggestion-path js-navigation-open p-2" href="">
    <div class="jump-to-octicon js-jump-to-octicon flex-shrink-0 mr-2 text-center d-none">
      <svg height="16" width="16" class="octicon octicon-repo flex-shrink-0 js-jump-to-octicon-repo d-none" title="Repository" aria-label="Repository" viewBox="0 0 12 16" version="1.1" role="img"><path fill-rule="evenodd" d="M4 9H3V8h1v1zm0-3H3v1h1V6zm0-2H3v1h1V4zm0-2H3v1h1V2zm8-1v12c0 .55-.45 1-1 1H6v2l-1.5-1.5L3 16v-2H1c-.55 0-1-.45-1-1V1c0-.55.45-1 1-1h10c.55 0 1 .45 1 1zm-1 10H1v2h2v-1h3v1h5v-2zm0-10H2v9h9V1z"/></svg>
      <svg height="16" width="16" class="octicon octicon-project flex-shrink-0 js-jump-to-octicon-project d-none" title="Project" aria-label="Project" viewBox="0 0 15 16" version="1.1" role="img"><path fill-rule="evenodd" d="M10 12h3V2h-3v10zm-4-2h3V2H6v8zm-4 4h3V2H2v12zm-1 1h13V1H1v14zM14 0H1a1 1 0 0 0-1 1v14a1 1 0 0 0 1 1h13a1 1 0 0 0 1-1V1a1 1 0 0 0-1-1z"/></svg>
      <svg height="16" width="16" class="octicon octicon-search flex-shrink-0 js-jump-to-octicon-search d-none" title="Search" aria-label="Search" viewBox="0 0 16 16" version="1.1" role="img"><path fill-rule="evenodd" d="M15.7 13.3l-3.81-3.83A5.93 5.93 0 0 0 13 6c0-3.31-2.69-6-6-6S1 2.69 1 6s2.69 6 6 6c1.3 0 2.48-.41 3.47-1.11l3.83 3.81c.19.2.45.3.7.3.25 0 .52-.09.7-.3a.996.996 0 0 0 0-1.41v.01zM7 10.7c-2.59 0-4.7-2.11-4.7-4.7 0-2.59 2.11-4.7 4.7-4.7 2.59 0 4.7 2.11 4.7 4.7 0 2.59-2.11 4.7-4.7 4.7z"/></svg>
    </div>

    <img class="avatar mr-2 flex-shrink-0 js-jump-to-suggestion-avatar d-none" alt="" aria-label="Team" src="" width="28" height="28">

    <div class="jump-to-suggestion-name js-jump-to-suggestion-name flex-auto overflow-hidden text-left no-wrap css-truncate css-truncate-target">
    </div>

    <div class="border rounded-1 flex-shrink-0 bg-gray px-1 text-gray-light ml-1 f6 d-none js-jump-to-badge-search">
      <span class="js-jump-to-badge-search-text-default d-none" aria-label="in this repository">
        In this repository
      </span>
      <span class="js-jump-to-badge-search-text-global d-none" aria-label="in all of GitHub">
        All GitHub
      </span>
      <span aria-hidden="true" class="d-inline-block ml-1 v-align-middle">↵</span>
    </div>

    <div aria-hidden="true" class="border rounded-1 flex-shrink-0 bg-gray px-1 text-gray-light ml-1 f6 d-none d-on-nav-focus js-jump-to-badge-jump">
      Jump to
      <span class="d-inline-block ml-1 v-align-middle">↵</span>
    </div>
  </a>
</li>

  

<li class="d-flex flex-justify-start flex-items-center p-0 f5 navigation-item js-navigation-item js-jump-to-global-search d-none" role="option">
  <a tabindex="-1" class="no-underline d-flex flex-auto flex-items-center jump-to-suggestions-path js-jump-to-suggestion-path js-navigation-open p-2" href="">
    <div class="jump-to-octicon js-jump-to-octicon flex-shrink-0 mr-2 text-center d-none">
      <svg height="16" width="16" class="octicon octicon-repo flex-shrink-0 js-jump-to-octicon-repo d-none" title="Repository" aria-label="Repository" viewBox="0 0 12 16" version="1.1" role="img"><path fill-rule="evenodd" d="M4 9H3V8h1v1zm0-3H3v1h1V6zm0-2H3v1h1V4zm0-2H3v1h1V2zm8-1v12c0 .55-.45 1-1 1H6v2l-1.5-1.5L3 16v-2H1c-.55 0-1-.45-1-1V1c0-.55.45-1 1-1h10c.55 0 1 .45 1 1zm-1 10H1v2h2v-1h3v1h5v-2zm0-10H2v9h9V1z"/></svg>
      <svg height="16" width="16" class="octicon octicon-project flex-shrink-0 js-jump-to-octicon-project d-none" title="Project" aria-label="Project" viewBox="0 0 15 16" version="1.1" role="img"><path fill-rule="evenodd" d="M10 12h3V2h-3v10zm-4-2h3V2H6v8zm-4 4h3V2H2v12zm-1 1h13V1H1v14zM14 0H1a1 1 0 0 0-1 1v14a1 1 0 0 0 1 1h13a1 1 0 0 0 1-1V1a1 1 0 0 0-1-1z"/></svg>
      <svg height="16" width="16" class="octicon octicon-search flex-shrink-0 js-jump-to-octicon-search d-none" title="Search" aria-label="Search" viewBox="0 0 16 16" version="1.1" role="img"><path fill-rule="evenodd" d="M15.7 13.3l-3.81-3.83A5.93 5.93 0 0 0 13 6c0-3.31-2.69-6-6-6S1 2.69 1 6s2.69 6 6 6c1.3 0 2.48-.41 3.47-1.11l3.83 3.81c.19.2.45.3.7.3.25 0 .52-.09.7-.3a.996.996 0 0 0 0-1.41v.01zM7 10.7c-2.59 0-4.7-2.11-4.7-4.7 0-2.59 2.11-4.7 4.7-4.7 2.59 0 4.7 2.11 4.7 4.7 0 2.59-2.11 4.7-4.7 4.7z"/></svg>
    </div>

    <img class="avatar mr-2 flex-shrink-0 js-jump-to-suggestion-avatar d-none" alt="" aria-label="Team" src="" width="28" height="28">

    <div class="jump-to-suggestion-name js-jump-to-suggestion-name flex-auto overflow-hidden text-left no-wrap css-truncate css-truncate-target">
    </div>

    <div class="border rounded-1 flex-shrink-0 bg-gray px-1 text-gray-light ml-1 f6 d-none js-jump-to-badge-search">
      <span class="js-jump-to-badge-search-text-default d-none" aria-label="in this repository">
        In this repository
      </span>
      <span class="js-jump-to-badge-search-text-global d-none" aria-label="in all of GitHub">
        All GitHub
      </span>
      <span aria-hidden="true" class="d-inline-block ml-1 v-align-middle">↵</span>
    </div>

    <div aria-hidden="true" class="border rounded-1 flex-shrink-0 bg-gray px-1 text-gray-light ml-1 f6 d-none d-on-nav-focus js-jump-to-badge-jump">
      Jump to
      <span class="d-inline-block ml-1 v-align-middle">↵</span>
    </div>
  </a>
</li>


</ul>

            </div>
      </label>
</form>  </div>
</div>

          </div>

        <a href="/login?return_to=%2Fviveksenthilsj%2Fcitadel%2Fblob%2Fmaster%2F1.js"
          class="HeaderMenu-link no-underline mr-3"
          data-hydro-click="{&quot;event_type&quot;:&quot;authentication.click&quot;,&quot;payload&quot;:{&quot;location_in_page&quot;:&quot;site header menu&quot;,&quot;repository_id&quot;:null,&quot;auth_type&quot;:&quot;SIGN_UP&quot;,&quot;client_id&quot;:null,&quot;originating_request_id&quot;:&quot;BFAE:6966:13B299:1C3670:5D3CB1F9&quot;,&quot;originating_url&quot;:&quot;https://github.com/viveksenthilsj/citadel/blob/master/1.js&quot;,&quot;referrer&quot;:null,&quot;user_id&quot;:null}}" data-hydro-click-hmac="f3d9f4c461cfe81e97775b23a5db5442401186c99337f27267b29902159f00fc"
          data-ga-click="(Logged out) Header, clicked Sign in, text:sign-in">
          Sign&nbsp;in
        </a>
          <a href="/join?source=header-repo"
            class="HeaderMenu-link d-inline-block no-underline border border-gray-dark rounded-1 px-2 py-1"
            data-hydro-click="{&quot;event_type&quot;:&quot;authentication.click&quot;,&quot;payload&quot;:{&quot;location_in_page&quot;:&quot;site header menu&quot;,&quot;repository_id&quot;:null,&quot;auth_type&quot;:&quot;SIGN_UP&quot;,&quot;client_id&quot;:null,&quot;originating_request_id&quot;:&quot;BFAE:6966:13B299:1C3670:5D3CB1F9&quot;,&quot;originating_url&quot;:&quot;https://github.com/viveksenthilsj/citadel/blob/master/1.js&quot;,&quot;referrer&quot;:null,&quot;user_id&quot;:null}}" data-hydro-click-hmac="f3d9f4c461cfe81e97775b23a5db5442401186c99337f27267b29902159f00fc"
            data-ga-click="(Logged out) Header, clicked Sign up, text:sign-up">
            Sign&nbsp;up
          </a>
      </div>
    </div>
  </div>
</header>

  </div>

  <div id="start-of-content" class="show-on-focus"></div>


    <div id="js-flash-container">

</div>



  <div class="application-main " data-commit-hovercards-enabled>
        <div itemscope itemtype="http://schema.org/SoftwareSourceCode" class="">
    <main  >
      


  








  <div class="pagehead repohead instapaper_ignore readability-menu experiment-repo-nav pt-0 pt-lg-4 ">
    <div class="repohead-details-container clearfix container-lg p-responsive d-none d-lg-block">

      <ul class="pagehead-actions">




  <li>
    
  <a class="tooltipped tooltipped-s btn btn-sm btn-with-count" aria-label="You must be signed in to watch a repository" rel="nofollow" data-hydro-click="{&quot;event_type&quot;:&quot;authentication.click&quot;,&quot;payload&quot;:{&quot;location_in_page&quot;:&quot;notification subscription menu watch&quot;,&quot;repository_id&quot;:null,&quot;auth_type&quot;:&quot;LOG_IN&quot;,&quot;client_id&quot;:null,&quot;originating_request_id&quot;:&quot;BFAE:6966:13B299:1C3670:5D3CB1F9&quot;,&quot;originating_url&quot;:&quot;https://github.com/viveksenthilsj/citadel/blob/master/1.js&quot;,&quot;referrer&quot;:null,&quot;user_id&quot;:null}}" data-hydro-click-hmac="70c62dd767ec24a3c3bbef45a7213e9c20fbc2b419cc530393786b9cfcc115e1" href="/login?return_to=%2Fviveksenthilsj%2Fcitadel">
    <svg class="octicon octicon-eye v-align-text-bottom" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M8.06 2C3 2 0 8 0 8s3 6 8.06 6C13 14 16 8 16 8s-3-6-7.94-6zM8 12c-2.2 0-4-1.78-4-4 0-2.2 1.8-4 4-4 2.22 0 4 1.8 4 4 0 2.22-1.78 4-4 4zm2-4c0 1.11-.89 2-2 2-1.11 0-2-.89-2-2 0-1.11.89-2 2-2 1.11 0 2 .89 2 2z"/></svg>
    Watch
</a>    <a class="social-count" href="/viveksenthilsj/citadel/watchers"
       aria-label="0 users are watching this repository">
      0
    </a>

  </li>

  <li>
        <a class="btn btn-sm btn-with-count tooltipped tooltipped-s" aria-label="You must be signed in to star a repository" rel="nofollow" data-hydro-click="{&quot;event_type&quot;:&quot;authentication.click&quot;,&quot;payload&quot;:{&quot;location_in_page&quot;:&quot;star button&quot;,&quot;repository_id&quot;:125029590,&quot;auth_type&quot;:&quot;LOG_IN&quot;,&quot;client_id&quot;:null,&quot;originating_request_id&quot;:&quot;BFAE:6966:13B299:1C3670:5D3CB1F9&quot;,&quot;originating_url&quot;:&quot;https://github.com/viveksenthilsj/citadel/blob/master/1.js&quot;,&quot;referrer&quot;:null,&quot;user_id&quot;:null}}" data-hydro-click-hmac="44babddbcd24487013bd85023f74cb3685b3ae0440cb58726640e6f463de53d2" href="/login?return_to=%2Fviveksenthilsj%2Fcitadel">
      <svg class="octicon octicon-star v-align-text-bottom" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M14 6l-4.9-.64L7 1 4.9 5.36 0 6l3.6 3.26L2.67 14 7 11.67 11.33 14l-.93-4.74L14 6z"/></svg>
      Star
</a>
    <a class="social-count js-social-count" href="/viveksenthilsj/citadel/stargazers"
      aria-label="0 users starred this repository">
      0
    </a>

  </li>

  <li>
      <a class="btn btn-sm btn-with-count tooltipped tooltipped-s" aria-label="You must be signed in to fork a repository" rel="nofollow" data-hydro-click="{&quot;event_type&quot;:&quot;authentication.click&quot;,&quot;payload&quot;:{&quot;location_in_page&quot;:&quot;repo details fork button&quot;,&quot;repository_id&quot;:125029590,&quot;auth_type&quot;:&quot;LOG_IN&quot;,&quot;client_id&quot;:null,&quot;originating_request_id&quot;:&quot;BFAE:6966:13B299:1C3670:5D3CB1F9&quot;,&quot;originating_url&quot;:&quot;https://github.com/viveksenthilsj/citadel/blob/master/1.js&quot;,&quot;referrer&quot;:null,&quot;user_id&quot;:null}}" data-hydro-click-hmac="af4c8bb5d86c3c204c50d8dcc593ad1ff39df525ab1845fec533d125b1f3898f" href="/login?return_to=%2Fviveksenthilsj%2Fcitadel">
        <svg class="octicon octicon-repo-forked v-align-text-bottom" viewBox="0 0 10 16" version="1.1" width="10" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M8 1a1.993 1.993 0 0 0-1 3.72V6L5 8 3 6V4.72A1.993 1.993 0 0 0 2 1a1.993 1.993 0 0 0-1 3.72V6.5l3 3v1.78A1.993 1.993 0 0 0 5 15a1.993 1.993 0 0 0 1-3.72V9.5l3-3V4.72A1.993 1.993 0 0 0 8 1zM2 4.2C1.34 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zm3 10c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zm3-10c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z"/></svg>
        Fork
</a>
    <a href="/viveksenthilsj/citadel/network/members" class="social-count"
       aria-label="0 users forked this repository">
      0
    </a>
  </li>
</ul>

      <h1 class="public ">
    <svg class="octicon octicon-repo" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9H3V8h1v1zm0-3H3v1h1V6zm0-2H3v1h1V4zm0-2H3v1h1V2zm8-1v12c0 .55-.45 1-1 1H6v2l-1.5-1.5L3 16v-2H1c-.55 0-1-.45-1-1V1c0-.55.45-1 1-1h10c.55 0 1 .45 1 1zm-1 10H1v2h2v-1h3v1h5v-2zm0-10H2v9h9V1z"/></svg>
  <span class="author" itemprop="author"><a class="url fn" rel="author" data-hovercard-type="user" data-hovercard-url="/hovercards?user_id=24869849" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="/viveksenthilsj">viveksenthilsj</a></span><!--
--><span class="path-divider">/</span><!--
--><strong itemprop="name"><a data-pjax="#js-repo-pjax-container" href="/viveksenthilsj/citadel">citadel</a></strong>
  

</h1>

    </div>
    
<nav class="hx_reponav reponav js-repo-nav js-sidenav-container-pjax container-lg p-responsive d-none d-lg-block"
     itemscope
     itemtype="http://schema.org/BreadcrumbList"
    aria-label="Repository"
     data-pjax="#js-repo-pjax-container">

  <span itemscope itemtype="http://schema.org/ListItem" itemprop="itemListElement">
    <a class="js-selected-navigation-item selected reponav-item" itemprop="url" data-hotkey="g c" aria-current="page" data-selected-links="repo_source repo_downloads repo_commits repo_releases repo_tags repo_branches repo_packages /viveksenthilsj/citadel" href="/viveksenthilsj/citadel">
      <svg class="octicon octicon-code" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M9.5 3L8 4.5 11.5 8 8 11.5 9.5 13 14 8 9.5 3zm-5 0L0 8l4.5 5L6 11.5 2.5 8 6 4.5 4.5 3z"/></svg>
      <span itemprop="name">Code</span>
      <meta itemprop="position" content="1">
</a>  </span>

    <span itemscope itemtype="http://schema.org/ListItem" itemprop="itemListElement">
      <a itemprop="url" data-hotkey="g i" class="js-selected-navigation-item reponav-item" data-selected-links="repo_issues repo_labels repo_milestones /viveksenthilsj/citadel/issues" href="/viveksenthilsj/citadel/issues">
        <svg class="octicon octicon-issue-opened" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"/></svg>
        <span itemprop="name">Issues</span>
        <span class="Counter">0</span>
        <meta itemprop="position" content="2">
</a>    </span>

  <span itemscope itemtype="http://schema.org/ListItem" itemprop="itemListElement">
    <a data-hotkey="g p" itemprop="url" class="js-selected-navigation-item reponav-item" data-selected-links="repo_pulls checks /viveksenthilsj/citadel/pulls" href="/viveksenthilsj/citadel/pulls">
      <svg class="octicon octicon-git-pull-request" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M11 11.28V5c-.03-.78-.34-1.47-.94-2.06C9.46 2.35 8.78 2.03 8 2H7V0L4 3l3 3V4h1c.27.02.48.11.69.31.21.2.3.42.31.69v6.28A1.993 1.993 0 0 0 10 15a1.993 1.993 0 0 0 1-3.72zm-1 2.92c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zM4 3c0-1.11-.89-2-2-2a1.993 1.993 0 0 0-1 3.72v6.56A1.993 1.993 0 0 0 2 15a1.993 1.993 0 0 0 1-3.72V4.72c.59-.34 1-.98 1-1.72zm-.8 10c0 .66-.55 1.2-1.2 1.2-.65 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2zM2 4.2C1.34 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z"/></svg>
      <span itemprop="name">Pull requests</span>
      <span class="Counter">0</span>
      <meta itemprop="position" content="3">
</a>  </span>


    <a data-hotkey="g b" class="js-selected-navigation-item reponav-item" data-selected-links="repo_projects new_repo_project repo_project /viveksenthilsj/citadel/projects" href="/viveksenthilsj/citadel/projects">
      <svg class="octicon octicon-project" viewBox="0 0 15 16" version="1.1" width="15" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M10 12h3V2h-3v10zm-4-2h3V2H6v8zm-4 4h3V2H2v12zm-1 1h13V1H1v14zM14 0H1a1 1 0 0 0-1 1v14a1 1 0 0 0 1 1h13a1 1 0 0 0 1-1V1a1 1 0 0 0-1-1z"/></svg>
      Projects
      <span class="Counter" >0</span>
</a>


    <a data-skip-pjax="true" class="js-selected-navigation-item reponav-item" data-selected-links="security alerts policy /viveksenthilsj/citadel/security/advisories" href="/viveksenthilsj/citadel/security/advisories">
      <svg class="octicon octicon-shield" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M0 2l7-2 7 2v6.02C14 12.69 8.69 16 7 16c-1.69 0-7-3.31-7-7.98V2zm1 .75L7 1l6 1.75v5.268C13 12.104 8.449 15 7 15c-1.449 0-6-2.896-6-6.982V2.75zm1 .75L7 2v12c-1.207 0-5-2.482-5-5.985V3.5z"/></svg>
      Security
</a>
    <a class="js-selected-navigation-item reponav-item" data-selected-links="repo_graphs repo_contributors dependency_graph pulse people /viveksenthilsj/citadel/pulse" href="/viveksenthilsj/citadel/pulse">
      <svg class="octicon octicon-graph" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M16 14v1H0V0h1v14h15zM5 13H3V8h2v5zm4 0H7V3h2v10zm4 0h-2V6h2v7z"/></svg>
      Insights
</a>

</nav>

  <div class="reponav-wrapper reponav-small d-lg-none">
  <nav class="reponav js-reponav text-center no-wrap"
       itemscope
       itemtype="http://schema.org/BreadcrumbList">

    <span itemscope itemtype="http://schema.org/ListItem" itemprop="itemListElement">
      <a class="js-selected-navigation-item selected reponav-item" itemprop="url" aria-current="page" data-selected-links="repo_source repo_downloads repo_commits repo_releases repo_tags repo_branches repo_packages /viveksenthilsj/citadel" href="/viveksenthilsj/citadel">
        <span itemprop="name">Code</span>
        <meta itemprop="position" content="1">
</a>    </span>

      <span itemscope itemtype="http://schema.org/ListItem" itemprop="itemListElement">
        <a itemprop="url" class="js-selected-navigation-item reponav-item" data-selected-links="repo_issues repo_labels repo_milestones /viveksenthilsj/citadel/issues" href="/viveksenthilsj/citadel/issues">
          <span itemprop="name">Issues</span>
          <span class="Counter">0</span>
          <meta itemprop="position" content="2">
</a>      </span>

    <span itemscope itemtype="http://schema.org/ListItem" itemprop="itemListElement">
      <a itemprop="url" class="js-selected-navigation-item reponav-item" data-selected-links="repo_pulls checks /viveksenthilsj/citadel/pulls" href="/viveksenthilsj/citadel/pulls">
        <span itemprop="name">Pull requests</span>
        <span class="Counter">0</span>
        <meta itemprop="position" content="3">
</a>    </span>

      <span itemscope itemtype="http://schema.org/ListItem" itemprop="itemListElement">
        <a itemprop="url" class="js-selected-navigation-item reponav-item" data-selected-links="repo_projects new_repo_project repo_project /viveksenthilsj/citadel/projects" href="/viveksenthilsj/citadel/projects">
          <span itemprop="name">Projects</span>
          <span class="Counter">0</span>
          <meta itemprop="position" content="4">
</a>      </span>


      <a itemprop="url" class="js-selected-navigation-item reponav-item" data-selected-links="security alerts policy /viveksenthilsj/citadel/security/advisories" href="/viveksenthilsj/citadel/security/advisories">
        <span itemprop="name">Security</span>
        <meta itemprop="position" content="6">
</a>
      <a class="js-selected-navigation-item reponav-item" data-selected-links="pulse /viveksenthilsj/citadel/pulse" href="/viveksenthilsj/citadel/pulse">
        Pulse
</a>

  </nav>
</div>


  </div>
<div class="container-lg clearfix new-discussion-timeline experiment-repo-nav  p-responsive">
  <div class="repository-content ">

    
    


  
    <a class="d-none js-permalink-shortcut" data-hotkey="y" href="/viveksenthilsj/citadel/blob/f51522d8009c5a5e9365a7bf44d02568154d750c/1.js">Permalink</a>

    <!-- blob contrib key: blob_contributors:v21:a12d0cabb3c0ae27da0036de5a038461 -->
          <div class="signup-prompt-bg rounded-1">
      <div class="signup-prompt p-4 text-center mb-4 rounded-1">
        <div class="position-relative">
          <!-- '"` --><!-- </textarea></xmp> --></option></form><form action="/prompt_dismissals/signup" accept-charset="UTF-8" method="post"><input name="utf8" type="hidden" value="&#x2713;" /><input type="hidden" name="_method" value="put" /><input type="hidden" name="authenticity_token" value="Bc3+FqN8ZjKDgReap79ljlzlw8ZMxBvGZira9YrG9oYTKbQ98uujElIboh1rcIo0jau5djOL7l5fp115c7MJFQ==" />
            <button type="submit" class="position-absolute top-0 right-0 btn-link link-gray" data-ga-click="(Logged out) Sign up prompt, clicked Dismiss, text:dismiss">
              Dismiss
            </button>
</form>          <h3 class="pt-2">Join GitHub today</h3>
          <p class="col-6 mx-auto">GitHub is home to over 36 million developers working together to host and review code, manage projects, and build software together.</p>
          <a class="btn btn-primary" data-hydro-click="{&quot;event_type&quot;:&quot;authentication.click&quot;,&quot;payload&quot;:{&quot;location_in_page&quot;:&quot;files signup prompt&quot;,&quot;repository_id&quot;:null,&quot;auth_type&quot;:&quot;SIGN_UP&quot;,&quot;client_id&quot;:null,&quot;originating_request_id&quot;:&quot;BFAE:6966:13B299:1C3670:5D3CB1F9&quot;,&quot;originating_url&quot;:&quot;https://github.com/viveksenthilsj/citadel/blob/master/1.js&quot;,&quot;referrer&quot;:null,&quot;user_id&quot;:null}}" data-hydro-click-hmac="f8efa7c3c994639941331c4bc81d5d8fed74ef7c4a9f8e2499d3feb38ea436d4" data-ga-click="(Logged out) Sign up prompt, clicked Sign up, text:sign-up" href="/join?source=prompt-blob-show">Sign up</a>
        </div>
      </div>
    </div>


    <div class="d-flex flex-items-start flex-shrink-0 mb-2 flex-column flex-md-row">
      <span class="d-flex flex-justify-between width-full width-md-auto">
        
<details class="details-reset details-overlay select-menu branch-select-menu  hx_rsm" id="branch-select-menu">
  <summary class="btn btn-sm select-menu-button css-truncate"
           data-hotkey="w"
           
           title="Switch branches or tags">
    <i>Branch:</i>
    <span class="css-truncate-target">master</span>
  </summary>

  <details-menu class="select-menu-modal hx_rsm-modal position-absolute" style="z-index: 99;" src="/viveksenthilsj/citadel/ref-list/master/1.js?source_action=show&amp;source_controller=blob" preload>
    <include-fragment class="select-menu-loading-overlay anim-pulse">
      <svg height="32" class="octicon octicon-octoface" viewBox="0 0 16 16" version="1.1" width="32" aria-hidden="true"><path fill-rule="evenodd" d="M14.7 5.34c.13-.32.55-1.59-.13-3.31 0 0-1.05-.33-3.44 1.3-1-.28-2.07-.32-3.13-.32s-2.13.04-3.13.32c-2.39-1.64-3.44-1.3-3.44-1.3-.68 1.72-.26 2.99-.13 3.31C.49 6.21 0 7.33 0 8.69 0 13.84 3.33 15 7.98 15S16 13.84 16 8.69c0-1.36-.49-2.48-1.3-3.35zM8 14.02c-3.3 0-5.98-.15-5.98-3.35 0-.76.38-1.48 1.02-2.07 1.07-.98 2.9-.46 4.96-.46 2.07 0 3.88-.52 4.96.46.65.59 1.02 1.3 1.02 2.07 0 3.19-2.68 3.35-5.98 3.35zM5.49 9.01c-.66 0-1.2.8-1.2 1.78s.54 1.79 1.2 1.79c.66 0 1.2-.8 1.2-1.79s-.54-1.78-1.2-1.78zm5.02 0c-.66 0-1.2.79-1.2 1.78s.54 1.79 1.2 1.79c.66 0 1.2-.8 1.2-1.79s-.53-1.78-1.2-1.78z"/></svg>
    </include-fragment>
  </details-menu>
</details>

        <div class="BtnGroup flex-shrink-0 d-md-none">
          <a href="/viveksenthilsj/citadel/find/master"
                class="js-pjax-capture-input btn btn-sm BtnGroup-item"
                data-pjax
                data-hotkey="t">
            Find file
          </a>
          <clipboard-copy value="1.js" class="btn btn-sm BtnGroup-item">
            Copy path
          </clipboard-copy>
        </div>
      </span>
      <h2 id="blob-path" class="breadcrumb flex-auto min-width-0 text-normal flex-md-self-center ml-md-2 mr-md-3 my-2 my-md-0">
        <span class="js-repo-root text-bold"><span class="js-path-segment"><a data-pjax="true" href="/viveksenthilsj/citadel"><span>citadel</span></a></span></span><span class="separator">/</span><strong class="final-path">1.js</strong>
      </h2>

      <div class="BtnGroup flex-shrink-0 d-none d-md-inline-block">
        <a href="/viveksenthilsj/citadel/find/master"
              class="js-pjax-capture-input btn btn-sm BtnGroup-item"
              data-pjax
              data-hotkey="t">
          Find file
        </a>
        <clipboard-copy value="1.js" class="btn btn-sm BtnGroup-item">
          Copy path
        </clipboard-copy>
      </div>
    </div>



    <include-fragment src="/viveksenthilsj/citadel/contributors/master/1.js" class="Box Box--condensed commit-loader">
      <div class="Box-body bg-blue-light f6">
        Fetching contributors&hellip;
      </div>

      <div class="Box-body d-flex flex-items-center" >
          <img alt="" class="loader-loading mr-2" src="https://github.githubassets.com/images/spinners/octocat-spinner-32-EAF2F5.gif" width="16" height="16" />
        <span class="text-red h6 loader-error">Cannot retrieve contributors at this time</span>
      </div>
</include-fragment>




    <div class="Box mt-3 position-relative">
      
<div class="Box-header py-2 d-flex flex-column flex-shrink-0 flex-md-row flex-md-items-center">

  <div class="text-mono f6 flex-auto pr-3 flex-order-2 flex-md-order-1 mt-2 mt-md-0">
      4 lines (3 sloc)
      <span class="file-info-divider"></span>
    89.4 KB
  </div>

  <div class="d-flex py-1 py-md-0 flex-auto flex-order-1 flex-md-order-2 flex-sm-grow-0 flex-justify-between">

    <div class="BtnGroup">
      <a id="raw-url" class="btn btn-sm BtnGroup-item" href="/viveksenthilsj/citadel/raw/master/1.js">Raw</a>
        <a class="btn btn-sm js-update-url-with-hash BtnGroup-item" data-hotkey="b" href="/viveksenthilsj/citadel/blame/master/1.js">Blame</a>
      <a rel="nofollow" class="btn btn-sm BtnGroup-item" href="/viveksenthilsj/citadel/commits/master/1.js">History</a>
    </div>


    <div>

          <button type="button" class="btn-octicon disabled tooltipped tooltipped-nw"
            aria-label="You must be signed in to make or propose changes">
            <svg class="octicon octicon-pencil" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M0 12v3h3l8-8-3-3-8 8zm3 2H1v-2h1v1h1v1zm10.3-9.3L12 6 9 3l1.3-1.3a.996.996 0 0 1 1.41 0l1.59 1.59c.39.39.39 1.02 0 1.41z"/></svg>
          </button>
          <button type="button" class="btn-octicon btn-octicon-danger disabled tooltipped tooltipped-nw"
            aria-label="You must be signed in to make or propose changes">
            <svg class="octicon octicon-trashcan" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M11 2H9c0-.55-.45-1-1-1H5c-.55 0-1 .45-1 1H2c-.55 0-1 .45-1 1v1c0 .55.45 1 1 1v9c0 .55.45 1 1 1h7c.55 0 1-.45 1-1V5c.55 0 1-.45 1-1V3c0-.55-.45-1-1-1zm-1 12H3V5h1v8h1V5h1v8h1V5h1v8h1V5h1v9zm1-10H2V3h9v1z"/></svg>
          </button>
    </div>
  </div>
</div>




      

  <div itemprop="text" class="Box-body p-0 blob-wrapper data type-javascript ">
      
<table class="highlight tab-size js-file-line-container" data-tab-size="8">
      <tr>
        <td id="L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="LC1" class="blob-code blob-code-inner js-file-line">!function(a,b,c){&quot;undefined&quot;!=typeof module&amp;&amp;module.exports?module.exports=b():&quot;function&quot;==typeof c.define&amp;&amp;c.define.amd?define(b):c[a]=b()}(&quot;Firepad&quot;,function(){var a=a||{};a.utils={},a.utils.makeEventEmitter=function(a,b){a.prototype.allowedEvents_=b,a.prototype.on=function(a,b,c){this.validateEventType_(a),this.eventListeners_=this.eventListeners_||{},this.eventListeners_[a]=this.eventListeners_[a]||[],this.eventListeners_[a].push({callback:b,context:c})},a.prototype.off=function(a,b){this.validateEventType_(a),this.eventListeners_=this.eventListeners_||{};for(var c=this.eventListeners_[a]||[],d=0;d&lt;c.length;d++)if(c[d].callback===b)return void c.splice(d,1)},a.prototype.trigger=function(a){this.eventListeners_=this.eventListeners_||{};for(var b=this.eventListeners_[a]||[],c=0;c&lt;b.length;c++)b[c].callback.apply(b[c].context,Array.prototype.slice.call(arguments,1))},a.prototype.validateEventType_=function(a){if(this.allowedEvents_){for(var b=!1,c=0;c&lt;this.allowedEvents_.length;c++)if(this.allowedEvents_[c]===a){b=!0;break}if(!b)throw new Error(&#39;Unknown event &quot;&#39;+a+&#39;&quot;&#39;)}}},a.utils.elt=function(b,c,d){var e=document.createElement(b);if(&quot;string&quot;==typeof c)a.utils.setTextContent(e,c);else if(c)for(var f=0;f&lt;c.length;++f)e.appendChild(c[f]);for(var g in d||{})e.setAttribute(g,d[g]);return e},a.utils.setTextContent=function(a,b){a.innerHTML=&quot;&quot;,a.appendChild(document.createTextNode(b))},a.utils.on=function(a,b,c,d){a.addEventListener?a.addEventListener(b,c,d||!1):a.attachEvent&amp;&amp;a.attachEvent(&quot;on&quot;+b,c)},a.utils.off=function(a,b,c,d){a.removeEventListener?a.removeEventListener(b,c,d||!1):a.detachEvent&amp;&amp;a.detachEvent(&quot;on&quot;+b,c)},a.utils.preventDefault=function(a){a.preventDefault?a.preventDefault():a.returnValue=!1},a.utils.stopPropagation=function(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0},a.utils.stopEvent=function(b){a.utils.preventDefault(b),a.utils.stopPropagation(b)},a.utils.stopEventAnd=function(b){return function(c){return b(c),a.utils.stopEvent(c),!1}},a.utils.trim=function(a){return a.replace(/^\s+/g,&quot;&quot;).replace(/\s+$/g,&quot;&quot;)},a.utils.stringEndsWith=function(a,b){for(var c=&quot;string&quot;==typeof b?[b]:b,d=0;d&lt;c.length;d++){var b=c[d];if(-1!==a.indexOf(b,a.length-b.length))return!0}return!1},a.utils.assert=function(a,b){if(!a)throw new Error(b||&quot;assertion error&quot;)},a.utils.log=function(){if(&quot;undefined&quot;!=typeof console&amp;&amp;&quot;undefined&quot;!=typeof console.log){for(var a=[&quot;Firepad:&quot;],b=0;b&lt;arguments.length;b++)a.push(arguments[b]);console.log.apply(console,a)}};var a=a||{};a.Span=function(){function a(a,b){this.pos=a,this.length=b}return a.prototype.end=function(){return this.pos+this.length},a}();var a=a||{};a.TextOp=function(){function b(a){this.type=a,this.chars=null,this.text=null,this.attributes=null,&quot;insert&quot;===a?(this.text=arguments[1],c.assert(&quot;string&quot;==typeof this.text),this.attributes=arguments[2]||{},c.assert(&quot;object&quot;==typeof this.attributes)):&quot;delete&quot;===a?(this.chars=arguments[1],c.assert(&quot;number&quot;==typeof this.chars)):&quot;retain&quot;===a&amp;&amp;(this.chars=arguments[1],c.assert(&quot;number&quot;==typeof this.chars),this.attributes=arguments[2]||{},c.assert(&quot;object&quot;==typeof this.attributes))}var c=a.utils;return b.prototype.isInsert=function(){return&quot;insert&quot;===this.type},b.prototype.isDelete=function(){return&quot;delete&quot;===this.type},b.prototype.isRetain=function(){return&quot;retain&quot;===this.type},b.prototype.equals=function(a){return this.type===a.type&amp;&amp;this.text===a.text&amp;&amp;this.chars===a.chars&amp;&amp;this.attributesEqual(a.attributes)},b.prototype.attributesEqual=function(a){for(var b in this.attributes)if(this.attributes[b]!==a[b])return!1;for(b in a)if(this.attributes[b]!==a[b])return!1;return!0},b.prototype.hasEmptyAttributes=function(){var a=!0;for(var b in this.attributes){a=!1;break}return a},b}();var a=a||{};a.TextOperation=function(){&quot;use strict&quot;;function b(){return this&amp;&amp;this.constructor===b?(this.ops=[],this.baseLength=0,void(this.targetLength=0)):new b}function c(a){var b=a.ops;switch(b.length){case 1:return b[0];case 2:return b[0].isRetain()?b[1]:b[1].isRetain()?b[0]:null;case 3:if(b[0].isRetain()&amp;&amp;b[2].isRetain())return b[1]}return null}function d(a){return a.ops[0].isRetain()?a.ops[0].chars:0}var e=a.TextOp,f=a.utils;return b.prototype.equals=function(a){if(this.baseLength!==a.baseLength)return!1;if(this.targetLength!==a.targetLength)return!1;if(this.ops.length!==a.ops.length)return!1;for(var b=0;b&lt;this.ops.length;b++)if(!this.ops[b].equals(a.ops[b]))return!1;return!0},b.prototype.retain=function(a,b){if(&quot;number&quot;!=typeof a||0&gt;a)throw new Error(&quot;retain expects a positive integer.&quot;);if(0===a)return this;this.baseLength+=a,this.targetLength+=a,b=b||{};var c=this.ops.length&gt;0?this.ops[this.ops.length-1]:null;return c&amp;&amp;c.isRetain()&amp;&amp;c.attributesEqual(b)?c.chars+=a:this.ops.push(new e(&quot;retain&quot;,a,b)),this},b.prototype.insert=function(a,b){if(&quot;string&quot;!=typeof a)throw new Error(&quot;insert expects a string&quot;);if(&quot;&quot;===a)return this;b=b||{},this.targetLength+=a.length;var c=this.ops.length&gt;0?this.ops[this.ops.length-1]:null,d=this.ops.length&gt;1?this.ops[this.ops.length-2]:null;return c&amp;&amp;c.isInsert()&amp;&amp;c.attributesEqual(b)?c.text+=a:c&amp;&amp;c.isDelete()?d&amp;&amp;d.isInsert()&amp;&amp;d.attributesEqual(b)?d.text+=a:(this.ops[this.ops.length-1]=new e(&quot;insert&quot;,a,b),this.ops.push(c)):this.ops.push(new e(&quot;insert&quot;,a,b)),this},b.prototype[&quot;delete&quot;]=function(a){if(&quot;string&quot;==typeof a&amp;&amp;(a=a.length),&quot;number&quot;!=typeof a||0&gt;a)throw new Error(&quot;delete expects a positive integer or a string&quot;);if(0===a)return this;this.baseLength+=a;var b=this.ops.length&gt;0?this.ops[this.ops.length-1]:null;return b&amp;&amp;b.isDelete()?b.chars+=a:this.ops.push(new e(&quot;delete&quot;,a)),this},b.prototype.isNoop=function(){return 0===this.ops.length||1===this.ops.length&amp;&amp;this.ops[0].isRetain()&amp;&amp;this.ops[0].hasEmptyAttributes()},b.prototype.clone=function(){for(var a=new b,c=0;c&lt;this.ops.length;c++)this.ops[c].isRetain()?a.retain(this.ops[c].chars,this.ops[c].attributes):this.ops[c].isInsert()?a.insert(this.ops[c].text,this.ops[c].attributes):a[&quot;delete&quot;](this.ops[c].chars);return a},b.prototype.toString=function(){var a=Array.prototype.map||function(a){for(var b=this,c=[],d=0,e=b.length;e&gt;d;d++)c[d]=a(b[d]);return c};return a.call(this.ops,function(a){return a.isRetain()?&quot;retain &quot;+a.chars:a.isInsert()?&quot;insert &#39;&quot;+a.text+&quot;&#39;&quot;:&quot;delete &quot;+a.chars}).join(&quot;, &quot;)},b.prototype.toJSON=function(){for(var a=[],b=0;b&lt;this.ops.length;b++)this.ops[b].hasEmptyAttributes()||a.push(this.ops[b].attributes),&quot;retain&quot;===this.ops[b].type?a.push(this.ops[b].chars):&quot;insert&quot;===this.ops[b].type?a.push(this.ops[b].text):&quot;delete&quot;===this.ops[b].type&amp;&amp;a.push(-this.ops[b].chars);return 0===a.length&amp;&amp;a.push(0),a},b.fromJSON=function(a){for(var c=new b,d=0,e=a.length;e&gt;d;d++){var g=a[d],h={};&quot;object&quot;==typeof g&amp;&amp;(h=g,d++,g=a[d]),&quot;number&quot;==typeof g?g&gt;0?c.retain(g,h):c[&quot;delete&quot;](-g):(f.assert(&quot;string&quot;==typeof g),c.insert(g,h))}return c},b.prototype.apply=function(a,b,c){var d=this;if(b=b||[],c=c||[],a.length!==d.baseLength)throw new Error(&quot;The operation&#39;s base length must be equal to the string&#39;s length.&quot;);for(var e,g,h=[],i=0,j=0,k=this.ops,l=0,m=k.length;m&gt;l;l++){var n=k[l];if(n.isRetain()){if(j+n.chars&gt;a.length)throw new Error(&quot;Operation can&#39;t retain more characters than are left in the string.&quot;);for(h[i++]=a.slice(j,j+n.chars),e=0;e&lt;n.chars;e++){var o=b[j+e]||{},p={};for(g in o)p[g]=o[g],f.assert(p[g]!==!1);for(g in n.attributes)n.attributes[g]===!1?delete p[g]:p[g]=n.attributes[g],f.assert(p[g]!==!1);c.push(p)}j+=n.chars}else if(n.isInsert())for(h[i++]=n.text,e=0;e&lt;n.text.length;e++){var q={};for(g in n.attributes)q[g]=n.attributes[g],f.assert(q[g]!==!1);c.push(q)}else j+=n.chars}if(j!==a.length)throw new Error(&quot;The operation didn&#39;t operate on the whole string.&quot;);var r=h.join(&quot;&quot;);return f.assert(r.length===c.length),r},b.prototype.invert=function(a){for(var c=0,d=new b,e=this.ops,f=0,g=e.length;g&gt;f;f++){var h=e[f];h.isRetain()?(d.retain(h.chars),c+=h.chars):h.isInsert()?d[&quot;delete&quot;](h.text.length):(d.insert(a.slice(c,c+h.chars)),c+=h.chars)}return d},b.prototype.compose=function(a){function c(a,b,c){var d,e={};for(d in a)e[d]=a[d];for(d in b)c&amp;&amp;b[d]===!1?delete e[d]:e[d]=b[d];return e}var d=this;if(d.targetLength!==a.baseLength)throw new Error(&quot;The base length of the second operation has to be the target length of the first operation&quot;);for(var e,f=new b,g=d.clone().ops,h=a.clone().ops,i=0,j=0,k=g[i++],l=h[j++];;){if(&quot;undefined&quot;==typeof k&amp;&amp;&quot;undefined&quot;==typeof l)break;if(k&amp;&amp;k.isDelete())f[&quot;delete&quot;](k.chars),k=g[i++];else if(l&amp;&amp;l.isInsert())f.insert(l.text,l.attributes),l=h[j++];else{if(&quot;undefined&quot;==typeof k)throw new Error(&quot;Cannot compose operations: first operation is too short.&quot;);if(&quot;undefined&quot;==typeof l)throw new Error(&quot;Cannot compose operations: first operation is too long.&quot;);if(k.isRetain()&amp;&amp;l.isRetain())e=c(k.attributes,l.attributes),k.chars&gt;l.chars?(f.retain(l.chars,e),k.chars-=l.chars,l=h[j++]):k.chars===l.chars?(f.retain(k.chars,e),k=g[i++],l=h[j++]):(f.retain(k.chars,e),l.chars-=k.chars,k=g[i++]);else if(k.isInsert()&amp;&amp;l.isDelete())k.text.length&gt;l.chars?(k.text=k.text.slice(l.chars),l=h[j++]):k.text.length===l.chars?(k=g[i++],l=h[j++]):(l.chars-=k.text.length,k=g[i++]);else if(k.isInsert()&amp;&amp;l.isRetain())e=c(k.attributes,l.attributes,!0),k.text.length&gt;l.chars?(f.insert(k.text.slice(0,l.chars),e),k.text=k.text.slice(l.chars),l=h[j++]):k.text.length===l.chars?(f.insert(k.text,e),k=g[i++],l=h[j++]):(f.insert(k.text,e),l.chars-=k.text.length,k=g[i++]);else{if(!k.isRetain()||!l.isDelete())throw new Error(&quot;This shouldn&#39;t happen: op1: &quot;+JSON.stringify(k)+&quot;, op2: &quot;+JSON.stringify(l));k.chars&gt;l.chars?(f[&quot;delete&quot;](l.chars),k.chars-=l.chars,l=h[j++]):k.chars===l.chars?(f[&quot;delete&quot;](l.chars),k=g[i++],l=h[j++]):(f[&quot;delete&quot;](k.chars),l.chars-=k.chars,k=g[i++])}}}return f},b.prototype.shouldBeComposedWith=function(a){if(this.isNoop()||a.isNoop())return!0;var b=d(this),e=d(a),f=c(this),g=c(a);return f&amp;&amp;g?f.isInsert()&amp;&amp;g.isInsert()?b+f.text.length===e:f.isDelete()&amp;&amp;g.isDelete()?e+g.chars===b||b===e:!1:!1},b.prototype.shouldBeComposedWithInverted=function(a){if(this.isNoop()||a.isNoop())return!0;var b=d(this),e=d(a),f=c(this),g=c(a);return f&amp;&amp;g?f.isInsert()&amp;&amp;g.isInsert()?b+f.text.length===e||b===e:f.isDelete()&amp;&amp;g.isDelete()?e+g.chars===b:!1:!1},b.transformAttributes=function(a,b){var c,d={},e={},g={};for(c in a)g[c]=!0;for(c in b)g[c]=!0;for(c in g){var h=a[c],i=b[c];f.assert(null!=h||null!=i),null==h?e[c]=i:null==i?d[c]=h:h===i||(d[c]=h)}return[d,e]},b.transform=function(a,c){if(a.baseLength!==c.baseLength)throw new Error(&quot;Both operations have to have the same base length&quot;);for(var d=new b,e=new b,f=a.clone().ops,g=c.clone().ops,h=0,i=0,j=f[h++],k=g[i++];;){if(&quot;undefined&quot;==typeof j&amp;&amp;&quot;undefined&quot;==typeof k)break;if(j&amp;&amp;j.isInsert())d.insert(j.text,j.attributes),e.retain(j.text.length),j=f[h++];else if(k&amp;&amp;k.isInsert())d.retain(k.text.length),e.insert(k.text,k.attributes),k=g[i++];else{if(&quot;undefined&quot;==typeof j)throw new Error(&quot;Cannot transform operations: first operation is too short.&quot;);if(&quot;undefined&quot;==typeof k)throw new Error(&quot;Cannot transform operations: first operation is too long.&quot;);var l;if(j.isRetain()&amp;&amp;k.isRetain()){var m=b.transformAttributes(j.attributes,k.attributes);j.chars&gt;k.chars?(l=k.chars,j.chars-=k.chars,k=g[i++]):j.chars===k.chars?(l=k.chars,j=f[h++],k=g[i++]):(l=j.chars,k.chars-=j.chars,j=f[h++]),d.retain(l,m[0]),e.retain(l,m[1])}else if(j.isDelete()&amp;&amp;k.isDelete())j.chars&gt;k.chars?(j.chars-=k.chars,k=g[i++]):j.chars===k.chars?(j=f[h++],k=g[i++]):(k.chars-=j.chars,j=f[h++]);else if(j.isDelete()&amp;&amp;k.isRetain())j.chars&gt;k.chars?(l=k.chars,j.chars-=k.chars,k=g[i++]):j.chars===k.chars?(l=k.chars,j=f[h++],k=g[i++]):(l=j.chars,k.chars-=j.chars,j=f[h++]),d[&quot;delete&quot;](l);else{if(!j.isRetain()||!k.isDelete())throw new Error(&quot;The two operations aren&#39;t compatible&quot;);j.chars&gt;k.chars?(l=k.chars,j.chars-=k.chars,k=g[i++]):j.chars===k.chars?(l=j.chars,j=f[h++],k=g[i++]):(l=j.chars,k.chars-=j.chars,j=f[h++]),e[&quot;delete&quot;](l)}}}return[d,e]},b.prototype.transform=function(a){return b.transform(this,a)},b}();var a=a||{};a.AnnotationList=function(){function b(a,b){if(!a)throw new Error(&quot;AnnotationList assertion failed&quot;+(b?&quot;: &quot;+b:&quot;&quot;))}function c(a,b){this.pos=a,this.length=b.length,this.annotation=b.annotation,this.attachedObject_=b.attachedObject}function d(a,b){this.pos=a,this.length=b.length,this.annotation=b.annotation,this.node_=b}function e(a){this.head_=new f(0,h),this.changeHandler_=a}function f(a,b){this.length=a,this.annotation=b,this.attachedObject=null,this.next=null}var g=a.Span;c.prototype.getAttachedObject=function(){return this.attachedObject_},d.prototype.attachObject=function(a){this.node_.attachedObject=a};var h={equals:function(){return!1}};return e.prototype.insertAnnotatedSpan=function(a,c){this.wrapOperation_(new g(a.pos,0),function(d,e){b(!e||null===e.next);var g=new f(a.length,c);if(e){b(a.pos&gt;d&amp;&amp;a.pos&lt;d+e.length);var i=new f(0,h);return i.next=new f(a.pos-d,e.annotation),i.next.next=g,g.next=new f(d+e.length-a.pos,e.annotation),i.next}return g})},e.prototype.removeSpan=function(a){0!==a.length&amp;&amp;this.wrapOperation_(a,function(c,d){b(null!==d);var e=new f(0,h),g=e;for(a.pos&gt;c&amp;&amp;(g.next=new f(a.pos-c,d.annotation),g=g.next);a.end()&gt;c+d.length;)c+=d.length,d=d.next;var i=c+d.length-a.end();return i&gt;0&amp;&amp;(g.next=new f(i,d.annotation)),e.next})},e.prototype.updateSpan=function(a,c){0!==a.length&amp;&amp;this.wrapOperation_(a,function(d,e){b(null!==e);var g=new f(0,h),i=g,j=d,k=a.pos-j;for(b(k&lt;e.length),k&gt;0&amp;&amp;(i.next=new f(k,e.annotation),i=i.next,j+=i.length);null!==e&amp;&amp;a.end()&gt;=d+e.length;){var l=d+e.length-j;i.next=new f(l,c(e.annotation,l)),i=i.next,d+=e.length,e=e.next,j=d}var m=a.end()-j;return m&gt;0&amp;&amp;(b(m&lt;e.length),i.next=new f(m,c(e.annotation,m)),i=i.next,j+=i.length,i.next=new f(d+e.length-j,e.annotation)),g.next})},e.prototype.wrapOperation_=function(a,b){if(a.pos&lt;0)throw new Error(&quot;Span start cannot be negative.&quot;);var e,g=[],h=[],i=this.getAffectedNodes_(a);null!==i.start?(e=i.end.next,i.end.next=null):e=i.succ;var j=b(i.startPos,i.start),k=!1,l=!1;if(j){this.mergeNodesWithSameAnnotations_(j);var m;for(i.pred&amp;&amp;i.pred.annotation.equals(j.annotation)?(k=!0,j.length+=i.pred.length,i.beforePred.next=j,m=i.predPos):(i.beforeStart.next=j,m=i.startPos);j.next;)h.push(new d(m,j)),m+=j.length,j=j.next;i.succ&amp;&amp;i.succ.annotation.equals(j.annotation)?(j.length+=i.succ.length,l=!0,j.next=i.succ.next):j.next=e,h.push(new d(m,j))}else i.pred&amp;&amp;i.succ&amp;&amp;i.pred.annotation.equals(i.succ.annotation)?(k=!0,l=!0,j=new f(i.pred.length+i.succ.length,i.pred.annotation),i.beforePred.next=j,j.next=i.succ.next,h.push(new d(i.startPos-i.pred.length,j))):i.beforeStart.next=e;k&amp;&amp;g.push(new c(i.predPos,i.pred));for(var n=i.startPos,o=i.start;null!==o;)g.push(new c(n,o)),n+=o.length,o=o.next;l&amp;&amp;g.push(new c(n,i.succ)),this.changeHandler_(g,h)},e.prototype.getAffectedNodes_=function(a){for(var b={},c=null,d=this.head_,e=d.next,f=0;null!==e&amp;&amp;a.pos&gt;=f+e.length;)f+=e.length,c=d,d=e,e=e.next;if(null===e&amp;&amp;(0!==a.length||a.pos!==f))throw new Error(&quot;Span start exceeds the bounds of the AnnotationList.&quot;);for(b.startPos=f,0===a.length&amp;&amp;a.pos===f?b.start=null:b.start=e,b.beforeStart=d,f===a.pos&amp;&amp;f&gt;0?(b.pred=d,b.predPos=f-d.length,b.beforePred=c):b.pred=null;null!==e&amp;&amp;a.end()&gt;f;)f+=e.length,d=e,e=e.next;if(a.end()&gt;f)throw new Error(&quot;Span end exceeds the bounds of the AnnotationList.&quot;);return 0===a.length&amp;&amp;a.end()===f?b.end=null:b.end=d,b.succ=f===a.end()?e:null,b},e.prototype.mergeNodesWithSameAnnotations_=function(a){if(a)for(var b=null,c=a;c;)b&amp;&amp;b.annotation.equals(c.annotation)?(b.length+=c.length,b.next=c.next):b=c,c=c.next},e.prototype.forEach=function(a){for(var b=this.head_.next;null!==b;)a(b.length,b.annotation,b.attachedObject),b=b.next},e.prototype.getAnnotatedSpansForPos=function(a){for(var b=0,d=this.head_.next,e=null;null!==d&amp;&amp;b+d.length&lt;=a;)b+=d.length,e=d,d=d.next;if(null===d&amp;&amp;b!==a)throw new Error(&quot;pos exceeds the bounds of the AnnotationList&quot;);var f=[];return b===a&amp;&amp;e&amp;&amp;f.push(new c(b-e.length,e)),d&amp;&amp;f.push(new c(b,d)),f},e.prototype.getAnnotatedSpansForSpan=function(a){if(0===a.length)return[];for(var b=[],c=this.getAffectedNodes_(a),d=c.startPos,e=c.start;null!==e&amp;&amp;d&lt;a.end();){var f=Math.max(d,a.pos),h=Math.min(d+e.length,a.end()),i=new g(f,h-f);i.annotation=e.annotation,b.push(i),d+=e.length,e=e.next}return b},e.prototype.count=function(){for(var a=0,c=this.head_.next,d=null;null!==c;)d&amp;&amp;b(!d.annotation.equals(c.annotation)),d=c,c=c.next,a++;return a},f.prototype.clone=function(){var a=new f(this.spanLength,this.annotation);return a.next=this.next,a},e}();var a=a||{};a.Cursor=function(){&quot;use strict&quot;;function a(a,b){this.position=a,this.selectionEnd=b}return a.fromJSON=function(b){return new a(b.position,b.selectionEnd)},a.prototype.equals=function(a){return this.position===a.position&amp;&amp;this.selectionEnd===a.selectionEnd},a.prototype.compose=function(a){return a},a.prototype.transform=function(b){function c(a){for(var c=a,d=b.ops,e=0,f=b.ops.length;f&gt;e&amp;&amp;(d[e].isRetain()?a-=d[e].chars:d[e].isInsert()?c+=d[e].text.length:(c-=Math.min(a,d[e].chars),a-=d[e].chars),!(0&gt;a));e++);return c}var d=c(this.position);return this.position===this.selectionEnd?new a(d,d):new a(d,c(this.selectionEnd))},a}();var a=a||{};a.FirebaseAdapter=function(b){function c(a,b,c){this.ref_=a,this.ready_=!1,this.firebaseCallbacks_=[],this.zombie_=!1,this.document_=new g,this.revision_=0,this.pendingReceivedRevisions_={};var d=this;if(b){this.setUserId(b),this.setColor(c);var e=a.root.child(&quot;.info/connected&quot;);this.firebaseOn_(e,&quot;value&quot;,function(a){a.val()===!0&amp;&amp;d.initializeUserData_()},this),this.on(&quot;ready&quot;,function(){d.monitorCursors_()})}else this.userId_=a.push().key;setTimeout(function(){d.monitorHistory_()},0)}function d(a,b){if(!a)throw new Error(b||&quot;assertion error&quot;)}function e(a){if(0===a)return&quot;A0&quot;;for(var b=&quot;&quot;;a&gt;0;){var c=a%j.length;b=j[c]+b,a-=c,a/=j.length}var d=j[b.length+9];return d+b}function f(a){d(a.length&gt;0&amp;&amp;a[0]===j[a.length+8]);for(var b=0,c=1;c&lt;a.length;c++)b*=j.length,b+=j.indexOf(a[c]);return b}void 0===window.firebase&amp;&amp;&quot;function&quot;==typeof require&amp;&amp;&quot;function&quot;!=typeof Firebase&amp;&amp;(firebase=require(&quot;firebase&quot;));var g=a.TextOperation,h=a.utils,i=100;h.makeEventEmitter(c,[&quot;ready&quot;,&quot;cursor&quot;,&quot;operation&quot;,&quot;ack&quot;,&quot;retry&quot;]),c.prototype.dispose=function(){var a=this;return this.ready_?(this.removeFirebaseCallbacks_(),this.userRef_&amp;&amp;(this.userRef_.child(&quot;cursor&quot;).remove(),this.userRef_.child(&quot;color&quot;).remove()),this.ref_=null,this.document_=null,void(this.zombie_=!0)):void this.on(&quot;ready&quot;,function(){a.dispose()})},c.prototype.setUserId=function(a){this.userRef_&amp;&amp;(this.userRef_.child(&quot;cursor&quot;).remove(),this.userRef_.child(&quot;cursor&quot;).onDisconnect().cancel(),this.userRef_.child(&quot;color&quot;).remove(),this.userRef_.child(&quot;color&quot;).onDisconnect().cancel()),this.userId_=a,this.userRef_=this.ref_.child(&quot;users&quot;).child(a),this.initializeUserData_()},c.prototype.isHistoryEmpty=function(){return d(this.ready_,&quot;Not ready yet.&quot;),0===this.revision_},c.prototype.sendOperation=function(a,b){function c(a,d){f.ref_.child(&quot;history&quot;).child(a).transaction(function(a){return null===a?d:void 0},function(e,g,i){if(e){if(&quot;disconnect&quot;!==e.message)throw h.log(&quot;Transaction failure!&quot;,e),e;f.sent_&amp;&amp;f.sent_.id===a?setTimeout(function(){c(a,d)},0):b&amp;&amp;b(e,!1)}else b&amp;&amp;b(null,g)},!1)}var f=this;if(!this.ready_)return void this.on(&quot;ready&quot;,function(){f.trigger(&quot;retry&quot;)});d(this.document_.targetLength===a.baseLength,&quot;sendOperation() called with invalid operation.&quot;);var g=e(this.revision_);this.sent_={id:g,op:a},c(g,{a:f.userId_,o:a.toJSON(),t:firebase.database.ServerValue.TIMESTAMP})},c.prototype.sendCursor=function(a){this.userRef_.child(&quot;cursor&quot;).set(a),this.cursor_=a},c.prototype.setColor=function(a){this.userRef_.child(&quot;color&quot;).set(a),this.color_=a},c.prototype.getDocument=function(){return this.document_},c.prototype.registerCallbacks=function(a){for(var b in a)this.on(b,a[b])},c.prototype.initializeUserData_=function(){this.userRef_.child(&quot;cursor&quot;).onDisconnect().remove(),this.userRef_.child(&quot;color&quot;).onDisconnect().remove(),this.sendCursor(this.cursor_||null),this.setColor(this.color_||null)},c.prototype.monitorCursors_=function(){function a(a){var b=a.key,d=a.val();c.trigger(&quot;cursor&quot;,b,d.cursor,d.color)}var b=this.ref_.child(&quot;users&quot;),c=this;this.firebaseOn_(b,&quot;child_added&quot;,a),this.firebaseOn_(b,&quot;child_changed&quot;,a),this.firebaseOn_(b,&quot;child_removed&quot;,function(a){var b=a.key;c.trigger(&quot;cursor&quot;,b,null)})},c.prototype.monitorHistory_=function(){var a=this;this.ref_.child(&quot;checkpoint&quot;).once(&quot;value&quot;,function(b){if(!a.zombie_){var c=b.child(&quot;id&quot;).val(),d=b.child(&quot;o&quot;).val(),e=b.child(&quot;a&quot;).val();null!=d&amp;&amp;null!=c&amp;&amp;null!==e?(a.pendingReceivedRevisions_[c]={o:d,a:e},a.checkpointRevision_=f(c),a.monitorHistoryStartingAt_(a.checkpointRevision_+1)):(a.checkpointRevision_=0,a.monitorHistoryStartingAt_(a.checkpointRevision_))}})},c.prototype.monitorHistoryStartingAt_=function(a){var b=this.ref_.child(&quot;history&quot;).startAt(null,e(a)),c=this;setTimeout(function(){c.firebaseOn_(b,&quot;child_added&quot;,function(a){var b=a.key;c.pendingReceivedRevisions_[b]=a.val(),c.ready_&amp;&amp;c.handlePendingReceivedRevisions_()}),b.once(&quot;value&quot;,function(){c.handleInitialRevisions_()})},0)},c.prototype.handleInitialRevisions_=function(){d(!this.ready_,&quot;Should not be called multiple times.&quot;),this.revision_=this.checkpointRevision_;for(var a=e(this.revision_),b=this.pendingReceivedRevisions_;null!=b[a];){var c=this.parseRevision_(b[a]);c?this.document_=this.document_.compose(c.operation):h.log(&quot;Invalid operation.&quot;,this.ref_.toString(),a,b[a]),delete b[a],this.revision_++,a=e(this.revision_)}this.trigger(&quot;operation&quot;,this.document_),this.ready_=!0;var f=this;setTimeout(function(){f.trigger(&quot;ready&quot;)},0)},c.prototype.handlePendingReceivedRevisions_=function(){for(var a=this.pendingReceivedRevisions_,b=e(this.revision_),c=!1;null!=a[b];){this.revision_++;var d=this.parseRevision_(a[b]);d?(this.document_=this.document_.compose(d.operation),this.sent_&amp;&amp;b===this.sent_.id?this.sent_.op.equals(d.operation)&amp;&amp;d.author===this.userId_?(this.revision_%i===0&amp;&amp;this.saveCheckpoint_(),this.sent_=null,this.trigger(&quot;ack&quot;)):(c=!0,this.trigger(&quot;operation&quot;,d.operation)):this.trigger(&quot;operation&quot;,d.operation)):h.log(&quot;Invalid operation.&quot;,this.ref_.toString(),b,a[b]),delete a[b],b=e(this.revision_)}c&amp;&amp;(this.sent_=null,this.trigger(&quot;retry&quot;))},c.prototype.parseRevision_=function(a){if(&quot;object&quot;!=typeof a)return null;if(&quot;string&quot;!=typeof a.a||&quot;object&quot;!=typeof a.o)return null;var b=null;try{b=g.fromJSON(a.o)}catch(c){return null}return b.baseLength!==this.document_.targetLength?null:{author:a.a,operation:b}},c.prototype.saveCheckpoint_=function(){this.ref_.child(&quot;checkpoint&quot;).set({a:this.userId_,o:this.document_.toJSON(),id:e(this.revision_-1)})},c.prototype.firebaseOn_=function(a,b,c,d){return this.firebaseCallbacks_.push({ref:a,eventType:b,callback:c,context:d}),a.on(b,c,d),c},c.prototype.firebaseOff_=function(a,b,c,d){a.off(b,c,d);for(var e=0;e&lt;this.firebaseCallbacks_.length;e++){var f=this.firebaseCallbacks_[e];if(f.ref===a&amp;&amp;f.eventType===b&amp;&amp;f.callback===c&amp;&amp;f.context===d){this.firebaseCallbacks_.splice(e,1);break}}},c.prototype.removeFirebaseCallbacks_=function(){for(var a=0;a&lt;this.firebaseCallbacks_.length;a++){var b=this.firebaseCallbacks_[a];b.ref.off(b.eventType,b.callback,b.context)}this.firebaseCallbacks_=[]};var j=&quot;0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz&quot;;return c}();var a=a||{};a.RichTextToolbar=function(b){function c(a){this.imageInsertionUI=a,this.element_=this.makeElement_()}var d=a.utils;return d.makeEventEmitter(c,[&quot;bold&quot;,&quot;italic&quot;,&quot;underline&quot;,&quot;strike&quot;,&quot;font&quot;,&quot;font-size&quot;,&quot;color&quot;,&quot;left&quot;,&quot;center&quot;,&quot;right&quot;,&quot;unordered-list&quot;,&quot;ordered-list&quot;,&quot;todo-list&quot;,&quot;indent-increase&quot;,&quot;indent-decrease&quot;,&quot;undo&quot;,&quot;redo&quot;,&quot;insert-image&quot;]),c.prototype.element=function(){return this.element_},c.prototype.makeButton_=function(a,b){var c=this;b=b||a;var e=d.elt(&quot;a&quot;,[d.elt(&quot;span&quot;,&quot;&quot;,{&quot;class&quot;:&quot;firepad-tb-&quot;+b})],{&quot;class&quot;:&quot;firepad-btn&quot;});return d.on(e,&quot;click&quot;,d.stopEventAnd(function(){c.trigger(a)})),e},c.prototype.makeElement_=function(){var a=this,b=this.makeFontDropdown_(),c=this.makeFontSizeDropdown_(),e=this.makeColorDropdown_(),f=[d.elt(&quot;div&quot;,[b],{&quot;class&quot;:&quot;firepad-btn-group&quot;}),d.elt(&quot;div&quot;,[c],{&quot;class&quot;:&quot;firepad-btn-group&quot;}),d.elt(&quot;div&quot;,[e],{&quot;class&quot;:&quot;firepad-btn-group&quot;}),d.elt(&quot;div&quot;,[a.makeButton_(&quot;bold&quot;),a.makeButton_(&quot;italic&quot;),a.makeButton_(&quot;underline&quot;),a.makeButton_(&quot;strike&quot;,&quot;strikethrough&quot;)],{&quot;class&quot;:&quot;firepad-btn-group&quot;}),d.elt(&quot;div&quot;,[a.makeButton_(&quot;unordered-list&quot;,&quot;list-2&quot;),a.makeButton_(&quot;ordered-list&quot;,&quot;numbered-list&quot;),a.makeButton_(&quot;todo-list&quot;,&quot;list&quot;)],{&quot;class&quot;:&quot;firepad-btn-group&quot;}),d.elt(&quot;div&quot;,[a.makeButton_(&quot;indent-decrease&quot;),a.makeButton_(&quot;indent-increase&quot;)],{&quot;class&quot;:&quot;firepad-btn-group&quot;}),d.elt(&quot;div&quot;,[a.makeButton_(&quot;left&quot;,&quot;paragraph-left&quot;),a.makeButton_(&quot;center&quot;,&quot;paragraph-center&quot;),a.makeButton_(&quot;right&quot;,&quot;paragraph-right&quot;)],{&quot;class&quot;:&quot;firepad-btn-group&quot;}),d.elt(&quot;div&quot;,[a.makeButton_(&quot;undo&quot;),a.makeButton_(&quot;redo&quot;)],{&quot;class&quot;:&quot;firepad-btn-group&quot;})];a.imageInsertionUI&amp;&amp;f.push(d.elt(&quot;div&quot;,[a.makeButton_(&quot;insert-image&quot;)],{&quot;class&quot;:&quot;firepad-btn-group&quot;}));var g=d.elt(&quot;div&quot;,f,{&quot;class&quot;:&quot;firepad-toolbar-wrapper&quot;}),h=d.elt(&quot;div&quot;,null,{&quot;class&quot;:&quot;firepad-toolbar&quot;});return h.appendChild(g),h},c.prototype.makeFontDropdown_=function(){for(var a=[&quot;Arial&quot;,&quot;Comic Sans MS&quot;,&quot;Courier New&quot;,&quot;Impact&quot;,&quot;Times New Roman&quot;,&quot;Verdana&quot;],b=[],c=0;c&lt;a.length;c++){var e=d.elt(&quot;span&quot;,a[c]);e.setAttribute(&quot;style&quot;,&quot;font-family:&quot;+a[c]),b.push({content:e,value:a[c]})}return this.makeDropdown_(&quot;Font&quot;,&quot;font&quot;,b)},c.prototype.makeFontSizeDropdown_=function(){for(var a=[9,10,12,14,18,24,32,42],b=[],c=0;c&lt;a.length;c++){var e=d.elt(&quot;span&quot;,a[c].toString());e.setAttribute(&quot;style&quot;,&quot;font-size:&quot;+a[c]+&quot;px; line-height:&quot;+(a[c]-6)+&quot;px;&quot;),b.push({content:e,value:a[c]})}return this.makeDropdown_(&quot;Size&quot;,&quot;font-size&quot;,b,&quot;px&quot;)},c.prototype.makeColorDropdown_=function(){for(var a=[&quot;black&quot;,&quot;red&quot;,&quot;green&quot;,&quot;blue&quot;,&quot;yellow&quot;,&quot;cyan&quot;,&quot;magenta&quot;,&quot;grey&quot;],b=[],c=0;c&lt;a.length;c++){var e=d.elt(&quot;div&quot;);e.className=&quot;firepad-color-dropdown-item&quot;,e.setAttribute(&quot;style&quot;,&quot;background-color:&quot;+a[c]),b.push({content:e,value:a[c]})}return this.makeDropdown_(&quot;Color&quot;,&quot;color&quot;,b)},c.prototype.makeDropdown_=function(a,b,c,e){function f(){l||(k.style.display=&quot;block&quot;,d.on(document,&quot;click&quot;,g,!0),l=!0)}function g(){l&amp;&amp;(k.style.display=&quot;&quot;,d.off(document,&quot;click&quot;,g,!0),l=!1),m=!0,setTimeout(function(){m=!1},0)}function h(a,c){&quot;object&quot;!=typeof a&amp;&amp;(a=document.createTextNode(String(a)));var f=d.elt(&quot;a&quot;,[a]);d.on(f,&quot;click&quot;,d.stopEventAnd(function(){g(),i.trigger(b,c+e)})),k.appendChild(f)}e=e||&quot;&quot;;var i=this,j=d.elt(&quot;a&quot;,a+&quot; ▾&quot;,{&quot;class&quot;:&quot;firepad-btn firepad-dropdown&quot;}),k=d.elt(&quot;ul&quot;,[],{&quot;class&quot;:&quot;firepad-dropdown-menu&quot;});j.appendChild(k);for(var l=!1,m=!1,n=0;n&lt;c.length;n++){var o=c[n].content,p=c[n].value;h(o,p)}return d.on(j,&quot;click&quot;,d.stopEventAnd(function(){m||f()})),j},c}();var a=a||{};a.WrappedOperation=function(a){&quot;use strict&quot;;function b(a,b){this.wrapped=a,this.meta=b}function c(a,b){for(var c in a)a.hasOwnProperty(c)&amp;&amp;(b[c]=a[c])}function d(a,b){if(a&amp;&amp;&quot;object&quot;==typeof a){if(&quot;function&quot;==typeof a.compose)return a.compose(b);var d={};return c(a,d),c(b,d),d}return b}function e(a,b){return a&amp;&amp;&quot;object&quot;==typeof a&amp;&amp;&quot;function&quot;==typeof a.transform?a.transform(b):a}return b.prototype.apply=function(){return this.wrapped.apply.apply(this.wrapped,arguments)},b.prototype.invert=function(){var a=this.meta;return new b(this.wrapped.invert.apply(this.wrapped,arguments),a&amp;&amp;&quot;object&quot;==typeof a&amp;&amp;&quot;function&quot;==typeof a.invert?a.invert.apply(a,arguments):a)},b.prototype.compose=function(a){return new b(this.wrapped.compose(a.wrapped),d(this.meta,a.meta))},b.transform=function(a,c){var d=a.wrapped.transform(c.wrapped);return[new b(d[0],e(a.meta,c.wrapped)),new b(d[1],e(c.meta,a.wrapped))]},b.prototype.transform=function(a){return b.transform(this,a)},b}();var a=a||{};a.UndoManager=function(){&quot;use strict&quot;;function a(a){this.maxItems=a||50,this.state=c,this.dontCompose=!1,this.undoStack=[],this.redoStack=[]}function b(a,b){for(var c=[],d=b.constructor,e=a.length-1;e&gt;=0;e--){var f=d.transform(a[e],b);&quot;function&quot;==typeof f[0].isNoop&amp;&amp;f[0].isNoop()||c.push(f[0]),b=f[1]}return c.reverse()}var c=&quot;normal&quot;,d=&quot;undoing&quot;,e=&quot;redoing&quot;;return a.prototype.add=function(a,b){if(this.state===d)this.redoStack.push(a),this.dontCompose=!0;else if(this.state===e)this.undoStack.push(a),this.dontCompose=!0;else{var c=this.undoStack;!this.dontCompose&amp;&amp;b&amp;&amp;c.length&gt;0?c.push(a.compose(c.pop())):(c.push(a),c.length&gt;this.maxItems&amp;&amp;c.shift()),this.dontCompose=!1,this.redoStack=[]}},a.prototype.transform=function(a){this.undoStack=b(this.undoStack,a),this.redoStack=b(this.redoStack,a)},a.prototype.performUndo=function(a){if(this.state=d,0===this.undoStack.length)throw new Error(&quot;undo not possible&quot;);a(this.undoStack.pop()),this.state=c},a.prototype.performRedo=function(a){if(this.state=e,0===this.redoStack.length)throw new Error(&quot;redo not possible&quot;);a(this.redoStack.pop()),this.state=c},a.prototype.canUndo=function(){return 0!==this.undoStack.length},a.prototype.canRedo=function(){return 0!==this.redoStack.length},a.prototype.isUndoing=function(){return this.state===d},a.prototype.isRedoing=function(){return this.state===e},a}();var a=a||{};a.Client=function(){&quot;use strict&quot;;function a(){this.state=e}function b(){}function c(a){this.outstanding=a}function d(a,b){this.outstanding=a,this.buffer=b}a.prototype.setState=function(a){this.state=a},a.prototype.applyClient=function(a){this.setState(this.state.applyClient(this,a))},a.prototype.applyServer=function(a){this.setState(this.state.applyServer(this,a))},a.prototype.serverAck=function(){this.setState(this.state.serverAck(this))},a.prototype.serverRetry=function(){this.setState(this.state.serverRetry(this))},a.prototype.sendOperation=function(a){throw new Error(&quot;sendOperation must be defined in child class&quot;)},a.prototype.applyOperation=function(a){throw new Error(&quot;applyOperation must be defined in child class&quot;)},a.Synchronized=b,b.prototype.applyClient=function(a,b){return a.sendOperation(b),new c(b)},b.prototype.applyServer=function(a,b){return a.applyOperation(b),this},b.prototype.serverAck=function(a){throw new Error(&quot;There is no pending operation.&quot;)},b.prototype.serverRetry=function(a){throw new Error(&quot;There is no pending operation.&quot;)};var e=new b;return a.AwaitingConfirm=c,c.prototype.applyClient=function(a,b){return new d(this.outstanding,b)},c.prototype.applyServer=function(a,b){var d=this.outstanding.transform(b);return a.applyOperation(d[1]),new c(d[0])},c.prototype.serverAck=function(a){return e},c.prototype.serverRetry=function(a){return a.sendOperation(this.outstanding),this},a.AwaitingWithBuffer=d,d.prototype.applyClient=function(a,b){var c=this.buffer.compose(b);return new d(this.outstanding,c)},d.prototype.applyServer=function(a,b){var c=this.outstanding.transform(b),e=this.buffer.transform(c[1]);return a.applyOperation(e[1]),new d(c[0],e[0])},d.prototype.serverRetry=function(a){var b=this.outstanding.compose(this.buffer);return a.sendOperation(b),new c(b)},d.prototype.serverAck=function(a){return a.sendOperation(this.buffer),new c(this.buffer)},a}();var a=a||{};a.EditorClient=function(){&quot;use strict&quot;;function b(a,b){this.cursorBefore=a,this.cursorAfter=b}function c(a,b){this.id=a,this.editorAdapter=b}function d(a,b){g.call(this),this.serverAdapter=a,this.editorAdapter=b,this.undoManager=new i,this.clients={};var c=this;this.editorAdapter.registerCallbacks({change:function(a,b){c.onChange(a,b)},cursorActivity:function(){c.onCursorActivity()},blur:function(){c.onBlur()},focus:function(){c.onFocus()}}),this.editorAdapter.registerUndo(function(){c.undo()}),this.editorAdapter.registerRedo(function(){c.redo()}),this.serverAdapter.registerCallbacks({ack:function(){c.serverAck(),c.focused&amp;&amp;c.state instanceof g.Synchronized&amp;&amp;(c.updateCursor(),c.sendCursor(c.cursor)),c.emitStatus()},retry:function(){c.serverRetry()},operation:function(a){c.applyServer(a)},cursor:function(a,b,d){if(c.serverAdapter.userId_!==a&amp;&amp;c.state instanceof g.Synchronized){var e=c.getClientObject(a);b?(d&amp;&amp;e.setColor(d),e.updateCursor(h.fromJSON(b))):e.removeCursor();</td>
      </tr>
      <tr>
        <td id="L2" class="blob-num js-line-number" data-line-number="2"></td>
        <td id="LC2" class="blob-code blob-code-inner js-file-line">}}})}function e(a,b){function c(){}c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a}function f(a){return a[a.length-1]}var g=a.Client,h=a.Cursor,i=a.UndoManager,j=a.WrappedOperation;return b.prototype.invert=function(){return new b(this.cursorAfter,this.cursorBefore)},b.prototype.compose=function(a){return new b(this.cursorBefore,a.cursorAfter)},b.prototype.transform=function(a){return new b(this.cursorBefore?this.cursorBefore.transform(a):null,this.cursorAfter?this.cursorAfter.transform(a):null)},c.prototype.setColor=function(a){this.color=a},c.prototype.updateCursor=function(a){this.removeCursor(),this.cursor=a,this.mark=this.editorAdapter.setOtherCursor(a,this.color,this.id)},c.prototype.removeCursor=function(){this.mark&amp;&amp;this.mark.clear()},e(d,g),d.prototype.getClientObject=function(a){var b=this.clients[a];return b?b:this.clients[a]=new c(a,this.editorAdapter)},d.prototype.applyUnredo=function(a){this.undoManager.add(this.editorAdapter.invertOperation(a)),this.editorAdapter.applyOperation(a.wrapped),this.cursor=a.meta.cursorAfter,this.cursor&amp;&amp;this.editorAdapter.setCursor(this.cursor),this.applyClient(a.wrapped)},d.prototype.undo=function(){var a=this;this.undoManager.canUndo()&amp;&amp;this.undoManager.performUndo(function(b){a.applyUnredo(b)})},d.prototype.redo=function(){var a=this;this.undoManager.canRedo()&amp;&amp;this.undoManager.performRedo(function(b){a.applyUnredo(b)})},d.prototype.onChange=function(a,c){var d=this.cursor;this.updateCursor();var e=this.undoManager.undoStack.length&gt;0&amp;&amp;c.shouldBeComposedWithInverted(f(this.undoManager.undoStack).wrapped),g=new b(this.cursor,d);this.undoManager.add(new j(c,g),e),this.applyClient(a)},d.prototype.updateCursor=function(){this.cursor=this.editorAdapter.getCursor()},d.prototype.onCursorActivity=function(){var a=this.cursor;this.updateCursor(),!this.focused||a&amp;&amp;this.cursor.equals(a)||this.sendCursor(this.cursor)},d.prototype.onBlur=function(){this.cursor=null,this.sendCursor(null),this.focused=!1},d.prototype.onFocus=function(){this.focused=!0,this.onCursorActivity()},d.prototype.sendCursor=function(a){this.state instanceof g.AwaitingWithBuffer||this.serverAdapter.sendCursor(a)},d.prototype.sendOperation=function(a){this.serverAdapter.sendOperation(a),this.emitStatus()},d.prototype.applyOperation=function(a){this.editorAdapter.applyOperation(a),this.updateCursor(),this.undoManager.transform(new j(a,null))},d.prototype.emitStatus=function(){var a=this;setTimeout(function(){a.trigger(&quot;synced&quot;,a.state instanceof g.Synchronized)},0)},d}(),a.utils.makeEventEmitter(a.EditorClient,[&quot;synced&quot;]);var a,b=function(a,b){return function(){return a.apply(b,arguments)}},c=[].slice;(&quot;undefined&quot;==typeof a||null===a)&amp;&amp;(a={}),a.ACEAdapter=function(){function d(a){this.onCursorActivity=b(this.onCursorActivity,this),this.onFocus=b(this.onFocus,this),this.onBlur=b(this.onBlur,this),this.onChange=b(this.onChange,this);var c;this.ace=a,this.aceSession=this.ace.getSession(),this.aceDoc=this.aceSession.getDocument(),this.aceDoc.setNewLineMode(&quot;unix&quot;),this.grabDocumentState(),this.ace.on(&quot;change&quot;,this.onChange),this.ace.on(&quot;blur&quot;,this.onBlur),this.ace.on(&quot;focus&quot;,this.onFocus),this.aceSession.selection.on(&quot;changeCursor&quot;,this.onCursorActivity),null==this.aceRange&amp;&amp;(this.aceRange=(null!=(c=ace.require)?c:require)(&quot;ace/range&quot;).Range)}return d.prototype.ignoreChanges=!1,d.prototype.grabDocumentState=function(){return this.lastDocLines=this.aceDoc.getAllLines(),this.lastCursorRange=this.aceSession.selection.getRange()},d.prototype.detach=function(){return this.ace.removeListener(&quot;change&quot;,this.onChange),this.ace.removeListener(&quot;blur&quot;,this.onBlur),this.ace.removeListener(&quot;focus&quot;,this.onCursorActivity),this.aceSession.selection.removeListener(&quot;changeCursor&quot;,this.onCursorActivity)},d.prototype.onChange=function(a){var b;return this.ignoreChanges?void 0:(b=this.operationFromACEChange(a),this.trigger.apply(this,[&quot;change&quot;].concat(c.call(b))),this.grabDocumentState())},d.prototype.onBlur=function(){return this.ace.selection.isEmpty()?this.trigger(&quot;blur&quot;):void 0},d.prototype.onFocus=function(){return this.trigger(&quot;focus&quot;)},d.prototype.onCursorActivity=function(){var a=this;return setTimeout(function(){return a.trigger(&quot;cursorActivity&quot;)},0)},d.prototype.operationFromACEChange=function(b){var c,d,e,f,g,h,i,j;return b.data?(e=b.data,&quot;insertLines&quot;===(j=e.action)||&quot;removeLines&quot;===j?(i=e.lines.join(&quot;\n&quot;)+&quot;\n&quot;,c=e.action.replace(&quot;Lines&quot;,&quot;&quot;)):(i=e.text.replace(this.aceDoc.getNewLineCharacter(),&quot;\n&quot;),c=e.action.replace(&quot;Text&quot;,&quot;&quot;)),h=this.indexFromPos(e.range.start)):(i=b.lines.join(&quot;\n&quot;),h=this.indexFromPos(b.start)),g=this.lastDocLines.join(&quot;\n&quot;).length-h,&quot;remove&quot;===b.action&amp;&amp;(g-=i.length),f=(new a.TextOperation).retain(h).insert(i).retain(g),d=(new a.TextOperation).retain(h)[&quot;delete&quot;](i).retain(g),&quot;remove&quot;===b.action?[d,f]:[f,d]},d.prototype.applyOperationToACE=function(a){var b,c,d,e,f,g,h,i;for(c=0,i=a.ops,g=0,h=i.length;h&gt;g;g++)d=i[g],d.isRetain()?c+=d.chars:d.isInsert()?(this.aceDoc.insert(this.posFromIndex(c),d.text),c+=d.text.length):d.isDelete()&amp;&amp;(b=this.posFromIndex(c),f=this.posFromIndex(c+d.chars),e=this.aceRange.fromPoints(b,f),this.aceDoc.remove(e));return this.grabDocumentState()},d.prototype.posFromIndex=function(a){var b,c,d,e,f;for(f=this.aceDoc.$lines,c=d=0,e=f.length;e&gt;d&amp;&amp;(b=f[c],!(a&lt;=b.length));c=++d)a-=b.length+1;return{row:c,column:a}},d.prototype.indexFromPos=function(a,b){var c,d,e,f;for(null==b&amp;&amp;(b=this.lastDocLines),d=0,c=e=0,f=a.row;f&gt;=0?f&gt;e:e&gt;f;c=f&gt;=0?++e:--e)d+=this.lastDocLines[c].length+1;return d+=a.column},d.prototype.getValue=function(){return this.aceDoc.getValue()},d.prototype.getCursor=function(){var b,c,d,e,f,g;try{e=this.indexFromPos(this.aceSession.selection.getRange().start,this.aceDoc.$lines),d=this.indexFromPos(this.aceSession.selection.getRange().end,this.aceDoc.$lines)}catch(h){b=h;try{e=this.indexFromPos(this.lastCursorRange.start),d=this.indexFromPos(this.lastCursorRange.end)}catch(h){c=h,console.log(&quot;Couldn&#39;t figure out the cursor range:&quot;,c,&quot;-- setting it to 0:0.&quot;),f=[0,0],e=f[0],d=f[1]}}return e&gt;d&amp;&amp;(g=[d,e],e=g[0],d=g[1]),new a.Cursor(e,d)},d.prototype.setCursor=function(a){var b,c,d;return c=this.posFromIndex(a.position),b=this.posFromIndex(a.selectionEnd),a.position&gt;a.selectionEnd&amp;&amp;(d=[b,c],c=d[0],b=d[1]),this.aceSession.selection.setSelectionRange(new this.aceRange(c.row,c.column,b.row,b.column))},d.prototype.setOtherCursor=function(a,b,c){var d,e,f,g,h,i,j,k,l=this;return null==this.otherCursors&amp;&amp;(this.otherCursors={}),f=this.otherCursors[c],f&amp;&amp;(f.start.detach(),f.end.detach(),this.aceSession.removeMarker(f.id)),j=this.posFromIndex(a.position),g=this.posFromIndex(a.selectionEnd),a.selectionEnd&lt;a.position&amp;&amp;(k=[g,j],j=k[0],g=k[1]),d=&quot;other-client-selection-&quot;+b.replace(&quot;#&quot;,&quot;&quot;),h=a.position===a.selectionEnd,h&amp;&amp;(d=d.replace(&quot;selection&quot;,&quot;cursor&quot;)),e=&quot;.&quot;+d+&quot; {\n  position: absolute;\n  background-color: &quot;+(h?&quot;transparent&quot;:b)+&quot;;\n  border-left: 2px solid &quot;+b+&quot;;\n}&quot;,this.addStyleRule(e),this.otherCursors[c]=f=new this.aceRange(j.row,j.column,g.row,g.column),i=this,f.clipRows=function(){var a;return a=i.aceRange.prototype.clipRows.apply(this,arguments),a.isEmpty=function(){return!1},a},f.start=this.aceDoc.createAnchor(f.start),f.end=this.aceDoc.createAnchor(f.end),f.id=this.aceSession.addMarker(f,d,&quot;text&quot;),{clear:function(){return f.start.detach(),f.end.detach(),l.aceSession.removeMarker(f.id)}}},d.prototype.addStyleRule=function(a){var b;if(&quot;undefined&quot;!=typeof document&amp;&amp;null!==document&amp;&amp;(this.addedStyleRules||(this.addedStyleRules={},b=document.createElement(&quot;style&quot;),document.documentElement.getElementsByTagName(&quot;head&quot;)[0].appendChild(b),this.addedStyleSheet=b.sheet),!this.addedStyleRules[a]))return this.addedStyleRules[a]=!0,this.addedStyleSheet.insertRule(a,0)},d.prototype.registerCallbacks=function(a){this.callbacks=a},d.prototype.trigger=function(){var a,b,d,e;return b=arguments[0],a=2&lt;=arguments.length?c.call(arguments,1):[],null!=(d=this.callbacks)&amp;&amp;null!=(e=d[b])?e.apply(this,a):void 0},d.prototype.applyOperation=function(a){return a.isNoop()||(this.ignoreChanges=!0),this.applyOperationToACE(a),this.ignoreChanges=!1},d.prototype.registerUndo=function(a){return this.ace.undo=a},d.prototype.registerRedo=function(a){return this.ace.redo=a},d.prototype.invertOperation=function(a){return a.invert(this.getValue())},d}();var a=a||{};a.AttributeConstants={BOLD:&quot;b&quot;,ITALIC:&quot;i&quot;,UNDERLINE:&quot;u&quot;,STRIKE:&quot;s&quot;,FONT:&quot;f&quot;,FONT_SIZE:&quot;fs&quot;,COLOR:&quot;c&quot;,BACKGROUND_COLOR:&quot;bc&quot;,ENTITY_SENTINEL:&quot;ent&quot;,LINE_SENTINEL:&quot;l&quot;,LINE_INDENT:&quot;li&quot;,LINE_ALIGN:&quot;la&quot;,LIST_TYPE:&quot;lt&quot;},a.sentinelConstants={LINE_SENTINEL_CHARACTER:&quot;&quot;,ENTITY_SENTINEL_CHARACTER:&quot;&quot;};var a=a||{};a.EntityManager=function(){function b(){this.entities_={};var a=[&quot;src&quot;,&quot;alt&quot;,&quot;width&quot;,&quot;height&quot;,&quot;style&quot;,&quot;class&quot;];this.register(&quot;img&quot;,{render:function(a){c.assert(a.src,&quot;image entity should have &#39;src&#39;!&quot;);for(var b=[&quot;src&quot;,&quot;alt&quot;,&quot;width&quot;,&quot;height&quot;,&quot;style&quot;,&quot;class&quot;],d=&quot;&lt;img &quot;,e=0;e&lt;b.length;e++){var f=b[e];f in a&amp;&amp;(d+=&quot; &quot;+f+&#39;=&quot;&#39;+a[f]+&#39;&quot;&#39;)}return d+=&quot;&gt;&quot;},fromElement:function(b){for(var c={},d=0;d&lt;a.length;d++){var e=a[d];b.hasAttribute(e)&amp;&amp;(c[e]=b.getAttribute(e))}return c}})}var c=a.utils;return b.prototype.register=function(b,c){a.utils.assert(c.render,&quot;Entity options should include a &#39;render&#39; function!&quot;),a.utils.assert(c.fromElement,&quot;Entity options should include a &#39;fromElement&#39; function!&quot;),this.entities_[b]=c},b.prototype.renderToElement=function(a,b){return this.tryRenderToElement_(a,&quot;render&quot;,b)},b.prototype.exportToElement=function(a){var b=this.tryRenderToElement_(a,&quot;export&quot;)||this.tryRenderToElement_(a,&quot;getHtml&quot;)||this.tryRenderToElement_(a,&quot;render&quot;);return b.setAttribute(&quot;data-firepad-entity&quot;,a.type),b},b.prototype.updateElement=function(a,b){var c=a.type,d=a.info;this.entities_[c]&amp;&amp;&quot;undefined&quot;!=typeof this.entities_[c].update&amp;&amp;this.entities_[c].update(d,b)},b.prototype.fromElement=function(b){var c=b.getAttribute(&quot;data-firepad-entity&quot;);if(c||(c=b.nodeName.toLowerCase()),c&amp;&amp;this.entities_[c]){var d=this.entities_[c].fromElement(b);return new a.Entity(c,d)}},b.prototype.tryRenderToElement_=function(b,c,d){var e=b.type,f=b.info;if(this.entities_[e]&amp;&amp;this.entities_[e][c]){var g=a.document||window&amp;&amp;window.document,h=this.entities_[e][c](f,d,g);if(h){if(&quot;string&quot;==typeof h){var i=(a.document||document).createElement(&quot;div&quot;);return i.innerHTML=h,i.childNodes[0]}if(&quot;object&quot;==typeof h)return a.utils.assert(&quot;undefined&quot;!=typeof h.nodeType,&quot;Error rendering &quot;+e+&quot; entity.  render() function must return an html string or a DOM element.&quot;),h}}},b.prototype.entitySupportsUpdate=function(a){return this.entities_[a]&amp;&amp;this.entities_[a].update},b}();var a=a||{};a.Entity=function(){function b(a,c){return this instanceof b?(this.type=a,void(this.info=c||{})):new b(a,c)}var c=a.AttributeConstants,d=c.ENTITY_SENTINEL,e=d+&quot;_&quot;;return b.prototype.toAttributes=function(){var a={};a[d]=this.type;for(var b in this.info)a[e+b]=this.info[b];return a},b.fromAttributes=function(a){var c=a[d],f={};for(var g in a)0===g.indexOf(e)&amp;&amp;(f[g.substr(e.length)]=a[g]);return new b(c,f)},b}();var a=a||{};a.RichTextCodeMirror=function(){function b(a,b,c){this.codeMirror=a,this.options_=c||{},this.entityManager_=b,this.currentAttributes_=null;var d=this;this.annotationList_=new j(function(a,b){d.onAnnotationsChanged_(a,b)}),this.initAnnotationList_(),i(this,&quot;onCodeMirrorBeforeChange_&quot;),i(this,&quot;onCodeMirrorChange_&quot;),i(this,&quot;onCursorActivity_&quot;),parseInt(CodeMirror.version)&gt;=4?this.codeMirror.on(&quot;changes&quot;,this.onCodeMirrorChange_):this.codeMirror.on(&quot;change&quot;,this.onCodeMirrorChange_),this.codeMirror.on(&quot;beforeChange&quot;,this.onCodeMirrorBeforeChange_),this.codeMirror.on(&quot;cursorActivity&quot;,this.onCursorActivity_),this.changeId_=0,this.outstandingChanges_={},this.dirtyLines_=[]}function c(a,b){return a.line-b.line||a.ch-b.ch}function d(a,b){return c(a,b)&lt;=0}function e(a){return a[a.length-1]}function f(a){if(0===a.length)return 0;for(var b=0,c=0;c&lt;a.length;c++)b+=a[c].length;return b+a.length-1}function g(a){this.attributes=a||{}}function h(a){for(var b in a)return!1;return!0}function i(a,b){var c=a[b];a[b]=function(){c.apply(a,arguments)}}var j=a.AnnotationList,k=a.Span,l=a.utils,m=a.AttributeConstants,n=&quot;cmrt-&quot;,o=&quot;cmrt-&quot;,p={c:&quot;color&quot;,bc:&quot;background-color&quot;,fs:&quot;font-size&quot;,li:function(a){return&quot;padding-left: &quot;+40*a+&quot;px&quot;}},q={};l.makeEventEmitter(b,[&quot;change&quot;,&quot;attributesChange&quot;,&quot;newLine&quot;]);var r=a.sentinelConstants.LINE_SENTINEL_CHARACTER,s=a.sentinelConstants.ENTITY_SENTINEL_CHARACTER;return b.prototype.detach=function(){this.codeMirror.off(&quot;beforeChange&quot;,this.onCodeMirrorBeforeChange_),this.codeMirror.off(&quot;change&quot;,this.onCodeMirrorChange_),this.codeMirror.off(&quot;changes&quot;,this.onCodeMirrorChange_),this.codeMirror.off(&quot;cursorActivity&quot;,this.onCursorActivity_),this.clearAnnotations_()},b.prototype.toggleAttribute=function(a,b){var c=b||!0;if(this.emptySelection_()){var d=this.getCurrentAttributes_();d[a]===c?delete d[a]:d[a]=c,this.currentAttributes_=d}else{var e=this.getCurrentAttributes_(),f=e[a]!==c?c:!1;this.setAttribute(a,f)}},b.prototype.setAttribute=function(a,b){var c=this.codeMirror;if(this.emptySelection_()){var d=this.getCurrentAttributes_();b===!1?delete d[a]:d[a]=b,this.currentAttributes_=d}else this.updateTextAttributes(c.indexFromPos(c.getCursor(&quot;start&quot;)),c.indexFromPos(c.getCursor(&quot;end&quot;)),function(c){b===!1?delete c[a]:c[a]=b}),this.updateCurrentAttributes_()},b.prototype.updateTextAttributes=function(a,b,c,d,e){var f=[],i=a,j=this;this.annotationList_.updateSpan(new k(a,b-a),function(a,b){var k={};for(var l in a.attributes)k[l]=a.attributes[l];(!k[m.LINE_SENTINEL]||e)&amp;&amp;c(k);var n={},o={};return j.computeChangedAttributes_(a.attributes,k,n,o),h(n)||f.push({start:i,end:i+b,attributes:n,attributesInverse:o,origin:d}),i+=b,new g(k)}),f.length&gt;0&amp;&amp;this.trigger(&quot;attributesChange&quot;,this,f)},b.prototype.computeChangedAttributes_=function(a,b,c,d){var e,f={};for(e in a)f[e]=!0;for(e in b)f[e]=!0;for(e in f)e in b?e in a?a[e]!==b[e]&amp;&amp;(c[e]=b[e],d[e]=a[e]):(c[e]=b[e],d[e]=!1):(c[e]=!1,d[e]=a[e])},b.prototype.toggleLineAttribute=function(a,b){var c,d=this.getCurrentLineAttributes_();c=a in d&amp;&amp;d[a]===b?!1:b,this.setLineAttribute(a,c)},b.prototype.setLineAttribute=function(a,b){this.updateLineAttributesForSelection(function(c){b===!1?delete c[a]:c[a]=b})},b.prototype.updateLineAttributesForSelection=function(a){var b=this.codeMirror,c=b.getCursor(&quot;start&quot;),d=b.getCursor(&quot;end&quot;),e=c.line,f=d.line,g=b.getLine(f),h=this.areLineSentinelCharacters_(g.substr(0,d.ch));f&gt;e&amp;&amp;h&amp;&amp;f--,this.updateLineAttributes(e,f,a)},b.prototype.updateLineAttributes=function(a,b,c){for(var d=a;b&gt;=d;d++){var e=this.codeMirror.getLine(d),f=this.codeMirror.indexFromPos({line:d,ch:0});if(e[0]!==r){var g={};g[m.LINE_SENTINEL]=!0,c(g),this.insertText(f,r,g)}else this.updateTextAttributes(f,f+1,c,null,!0)}},b.prototype.replaceText=function(a,b,c,d,e){this.changeId_++;var f=o+this.changeId_;this.outstandingChanges_[f]={origOrigin:e,attributes:d};var g=this.codeMirror,h=g.posFromIndex(a),i=&quot;number&quot;==typeof b?g.posFromIndex(b):null;g.replaceRange(c,h,i,f)},b.prototype.insertText=function(a,b,c,d){var e=this.codeMirror,f=e.getCursor(),g=&quot;RTCMADAPTER&quot;==d&amp;&amp;!e.somethingSelected()&amp;&amp;a==e.indexFromPos(f);this.replaceText(a,null,b,c,d),g&amp;&amp;e.setCursor(f)},b.prototype.removeText=function(a,b,c){var d=this.codeMirror;d.replaceRange(&quot;&quot;,d.posFromIndex(a),d.posFromIndex(b),c)},b.prototype.insertEntityAtCursor=function(a,b,c){var d=this.codeMirror,e=d.indexFromPos(d.getCursor(&quot;head&quot;));this.insertEntityAt(e,a,b,c)},b.prototype.insertEntityAt=function(b,c,d,e){this.codeMirror;this.insertEntity_(b,new a.Entity(c,d),e)},b.prototype.insertEntity_=function(a,b,c){this.replaceText(a,null,s,b.toAttributes(),c)},b.prototype.getAttributeSpans=function(a,b){for(var c=[],d=this.annotationList_.getAnnotatedSpansForSpan(new k(a,b-a)),e=0;e&lt;d.length;e++)c.push({length:d[e].length,attributes:d[e].annotation.attributes});return c},b.prototype.end=function(){var a=this.codeMirror.lineCount()-1;return this.codeMirror.indexFromPos({line:a,ch:this.codeMirror.getLine(a).length})},b.prototype.getRange=function(a,b){var c=this.codeMirror.posFromIndex(a),d=this.codeMirror.posFromIndex(b);return this.codeMirror.getRange(c,d)},b.prototype.initAnnotationList_=function(){var a=this.end();0!==a&amp;&amp;this.annotationList_.insertAnnotatedSpan(new k(0,a),new g)},b.prototype.onAnnotationsChanged_=function(a,b){var c,d={};this.tryToUpdateEntitiesInPlace(a,b);for(var e=0;e&lt;a.length;e++){var f=a[e].annotation.attributes;m.LINE_SENTINEL in f&amp;&amp;(d[this.codeMirror.posFromIndex(a[e].pos).line]=!0),c=a[e].getAttachedObject(),c&amp;&amp;c.clear()}for(e=0;e&lt;b.length;e++){var g=b[e].annotation,h=m.LINE_SENTINEL in g.attributes,i=m.ENTITY_SENTINEL in g.attributes,j=this.codeMirror.posFromIndex(b[e].pos);if(h)d[j.line]=!0;else if(i)this.markEntity_(b[e]);else{var k=this.getClassNameForAttributes_(g.attributes);if(&quot;&quot;!==k){var l=this.codeMirror.posFromIndex(b[e].pos+b[e].length);c=this.codeMirror.markText(j,l,{className:k}),b[e].attachObject(c)}}}for(var n in d)this.dirtyLines_.push(this.codeMirror.getLineHandle(Number(n))),this.queueLineMarking_()},b.prototype.tryToUpdateEntitiesInPlace=function(a,b){for(var c=a.length;c--;)for(var d=a[c],e=b.length;e--;){var f=b[e];if(d.pos==f.pos&amp;&amp;d.length==f.length&amp;&amp;d.annotation.attributes.ent&amp;&amp;d.annotation.attributes.ent==f.annotation.attributes.ent){var g=f.annotation.attributes.ent;if(this.entityManager_.entitySupportsUpdate(g)){a.splice(c,1),b.splice(e,1);var h=d.getAttachedObject();h.update(f.annotation.attributes),f.attachObject(h)}}}},b.prototype.queueLineMarking_=function(){if(null==this.lineMarkTimeout_){var a=this;this.lineMarkTimeout_=setTimeout(function(){a.lineMarkTimeout_=null;for(var b=[],c=0;c&lt;a.dirtyLines_.length;c++){var d=a.codeMirror.getLineNumber(a.dirtyLines_[c]);b.push(Number(d))}a.dirtyLines_=[],b.sort(function(a,b){return a-b});var e=-1;for(c=0;c&lt;b.length;c++){var f=b[c];f&gt;e&amp;&amp;(e=a.markLineSentinelCharactersForChangedLines_(f,f))}},0)}},b.prototype.addStyleWithCSS_=function(a){var b=document.getElementsByTagName(&quot;head&quot;)[0],c=document.createElement(&quot;style&quot;);c.type=&quot;text/css&quot;,c.styleSheet?c.styleSheet.cssText=a:c.appendChild(document.createTextNode(a)),b.appendChild(c)},b.prototype.getClassNameForAttributes_=function(b){var c=&quot;&quot;;for(var d in b){var e=b[d];if(d===m.LINE_SENTINEL)a.utils.assert(e===!0,&quot;LINE_SENTINEL attribute should be true if it exists.&quot;);else{var f=(this.options_.cssPrefix||n)+d;if(e!==!0){d===m.FONT_SIZE&amp;&amp;&quot;string&quot;!=typeof e&amp;&amp;(e+=&quot;px&quot;);var g=e.toString().toLowerCase().replace(/[^a-z0-9-_]/g,&quot;-&quot;);if(f+=&quot;-&quot;+g,p[d]&amp;&amp;(q[d]||(q[d]={}),!q[d][g])){q[d][g]=!0;var h=p[d],i=&quot;function&quot;==typeof h?h(e):h+&quot;: &quot;+e,j=d==m.LINE_INDENT?&quot;pre.&quot;+f:&quot;.&quot;+f;this.addStyleWithCSS_(j+&quot; { &quot;+i+&quot; }&quot;)}}c=c+&quot; &quot;+f}}return c},b.prototype.markEntity_=function(b){for(var c=b.annotation.attributes,d=a.Entity.fromAttributes(c),e=this.codeMirror,f=this,g=[],h=0;h&lt;b.length;h++){var i=e.posFromIndex(b.pos+h),j=e.posFromIndex(b.pos+h+1),k={collapsed:!0,atomic:!0,inclusiveLeft:!1,inclusiveRight:!1},l=this.createEntityHandle_(d,b.pos),m=this.entityManager_.renderToElement(d,l);m&amp;&amp;(k.replacedWith=m);var n=e.markText(i,j,k);g.push(n),l.setMarker(n)}b.attachObject({clear:function(){for(var a=0;a&lt;g.length;a++)g[a].clear()},update:function(b){for(var c=a.Entity.fromAttributes(b),d=0;d&lt;g.length;d++)f.entityManager_.updateElement(c,g[d].replacedWith)}}),this.queueRefresh_()},b.prototype.queueRefresh_=function(){var a=this;this.refreshTimer_||(this.refreshTimer_=setTimeout(function(){a.codeMirror.refresh(),a.refreshTimer_=null},0))},b.prototype.createEntityHandle_=function(b,c){function d(){if(h){var a=h.find();return a?i.codeMirror.indexFromPos(a.from):null}return c}function e(){var a=d();null!=a&amp;&amp;(i.codeMirror.focus(),i.removeText(a,a+1))}function f(c){var e=a.AttributeConstants,f=e.ENTITY_SENTINEL,g=f+&quot;_&quot;,h=d();i.updateTextAttributes(h,h+1,function(a){for(var d in a)delete a[d];a[f]=b.type;for(var e in c)a[g+e]=c[e]})}function g(a){h=a}var h=null,i=this;return{find:d,remove:e,replace:f,setMarker:g}},b.prototype.lineClassRemover_=function(a){var b=this.codeMirror,c=b.getLineHandle(a);return{clear:function(){b.removeLineClass(c,&quot;text&quot;,&quot;.*&quot;)}}},b.prototype.emptySelection_=function(){var a=this.codeMirror.getCursor(&quot;start&quot;),b=this.codeMirror.getCursor(&quot;end&quot;);return a.line===b.line&amp;&amp;a.ch===b.ch},b.prototype.onCodeMirrorBeforeChange_=function(a,b){if(&quot;+input&quot;===b.origin||&quot;paste&quot;===b.origin){for(var c=[],d=0;d&lt;b.text.length;d++){var e=b.text[d];e=e.replace(new RegExp(&quot;[&quot;+r+s+&quot;]&quot;,&quot;g&quot;),&quot;&quot;),c.push(e)}b.update(b.from,b.to,c)}},b.prototype.onCodeMirrorChange_=function(a,b){if(&quot;object&quot;==typeof b.from){for(var c=[];b;)c.push(b),b=b.next;b=c}for(var d=this.convertCoordinateSystemForChanges_(b),e=[],f=0;f&lt;d.length;f++){var h=d[f],i=h.start,j=(h.end,h.text),l=h.removed,m=h.origin;if(l.length&gt;0){for(var n=this.annotationList_.getAnnotatedSpansForSpan(new k(i,l.length)),o=0,p=0;p&lt;n.length;p++){var q=n[p];e.push({start:i,end:i+q.length,removedAttributes:q.annotation.attributes,removed:l.substr(o,q.length),attributes:{},text:&quot;&quot;,origin:h.origin}),o+=q.length}this.annotationList_.removeSpan(new k(i,l.length))}if(j.length&gt;0){var r;&quot;+input&quot;===h.origin||&quot;paste&quot;===h.origin?r=this.currentAttributes_||{}:m in this.outstandingChanges_?(r=this.outstandingChanges_[m].attributes,m=this.outstandingChanges_[m].origOrigin,delete this.outstandingChanges_[m]):r={},this.annotationList_.insertAnnotatedSpan(new k(i,j.length),new g(r)),e.push({start:i,end:i,removedAttributes:{},removed:&quot;&quot;,text:j,attributes:r,origin:m})}}this.markLineSentinelCharactersForChanges_(b),e.length&gt;0&amp;&amp;this.trigger(&quot;change&quot;,this,e)},b.prototype.convertCoordinateSystemForChanges_=function(a){function b(a,b){return function(c){return d(c,b.from)?a(c):d(b.to,c)?a({line:c.line+b.text.length-1-(b.to.line-b.from.line),ch:b.to.line&lt;c.line?c.ch:b.text.length&lt;=1?c.ch-(b.to.ch-b.from.ch)+f(b.text):c.ch-b.to.ch+e(b.text).length})+f(b.removed)-f(b.text):b.from.line===c.line?a(b.from)+c.ch-b.from.ch:a(b.from)+f(b.removed.slice(0,c.line-b.from.line))+1+c.ch}}for(var c=this,g=function(a){return c.codeMirror.indexFromPos(a)},h=[],i=a.length-1;i&gt;=0;i--){var j=a[i];g=b(g,j);var k=g(j.from),l=j.removed.join(&quot;\n&quot;),m=j.text.join(&quot;\n&quot;);h.unshift({start:k,end:k+l.length,removed:l,text:m,origin:j.origin})}return h},b.prototype.markLineSentinelCharactersForChanges_=function(a){for(var b=Number.MAX_VALUE,c=-1,d=0;d&lt;a.length;d++){var e=a[d],f=e.from.line;e.from.ch;(e.removed.length&gt;1||e.removed[0].indexOf(r)&gt;=0)&amp;&amp;(b=Math.min(b,f),c=Math.max(c,f)),e.text.length&gt;1?(b=Math.min(b,f),c=Math.max(c,f+e.text.length-1)):e.text[0].indexOf(r)&gt;=0&amp;&amp;(b=Math.min(b,f),c=Math.max(c,f))}c=Math.min(c,this.codeMirror.lineCount()-1),this.markLineSentinelCharactersForChangedLines_(b,c)},b.prototype.markLineSentinelCharactersForChangedLines_=function(a,b){if(a&lt;Number.MAX_VALUE)for(;a&gt;0&amp;&amp;this.lineIsListItemOrIndented_(a-1);)a--;if(b&gt;-1)for(var c=this.codeMirror.lineCount();c&gt;b+1&amp;&amp;this.lineIsListItemOrIndented_(b+1);)b++;for(var d=[],e=this.codeMirror,f=a;b&gt;=f;f++){var g=e.getLine(f),h=e.getLineHandle(f);if(e.removeLineClass(h,&quot;text&quot;,&quot;.*&quot;),g.length&gt;0)for(var i=g.indexOf(r);i&gt;=0;){for(var j=i;i&lt;g.length&amp;&amp;g[i]===r;){for(var k=e.findMarksAt({line:f,ch:i}),l=0;l&lt;k.length;l++)k[l].isForLineSentinel&amp;&amp;k[l].clear();i++}this.markLineSentinelCharacters_(f,j,i,d),i=g.indexOf(r,i)}else d=[]}return b},b.prototype.markLineSentinelCharacters_=function(a,b,c,d){var e=this.codeMirror,f=null,g=null,h=function(){var a=g.find();return a?a.from.line:null};if(0===b){var i=this.getLineAttributes_(a),j=i[m.LIST_TYPE],k=i[m.LINE_INDENT]||0;for(j&amp;&amp;0===k&amp;&amp;(k=1);k&gt;=d.length;)d.push(1);&quot;o&quot;===j?(f=this.makeOrderedListElement_(d[k]),d[k]++):&quot;u&quot;===j?(f=this.makeUnorderedListElement_(),d[k]=1):&quot;t&quot;===j?(f=this.makeTodoListElement_(!1,h),d[k]=1):&quot;tc&quot;===j&amp;&amp;(f=this.makeTodoListElement_(!0,h),d[k]=1);var l=this.getClassNameForAttributes_(i);&quot;&quot;!==l&amp;&amp;this.codeMirror.addLineClass(a,&quot;text&quot;,l),d=d.slice(0,k+1)}var n={inclusiveLeft:!0,collapsed:!0};f&amp;&amp;(n.replacedWith=f);var g=e.markText({line:a,ch:b},{line:a,ch:c},n);g.isForLineSentinel=!0},b.prototype.makeOrderedListElement_=function(a){return l.elt(&quot;div&quot;,a+&quot;.&quot;,{&quot;class&quot;:&quot;firepad-list-left&quot;})},b.prototype.makeUnorderedListElement_=function(){return l.elt(&quot;div&quot;,&quot;•&quot;,{&quot;class&quot;:&quot;firepad-list-left&quot;})},b.prototype.toggleTodo=function(a){var b,c=m.LIST_TYPE,d=this.getCurrentLineAttributes_();c in d&amp;&amp;(&quot;t&quot;===d[c]||&quot;tc&quot;===d[c])?&quot;t&quot;===d[c]?b=&quot;tc&quot;:&quot;tc&quot;===d[c]&amp;&amp;(b=a?&quot;t&quot;:!1):b=&quot;t&quot;,this.setLineAttribute(c,b)},b.prototype.makeTodoListElement_=function(a,b){var c={type:&quot;checkbox&quot;,&quot;class&quot;:&quot;firepad-todo-left&quot;};a&amp;&amp;(c.checked=!0);var d=l.elt(&quot;input&quot;,!1,c),e=this;return l.on(d,&quot;click&quot;,l.stopEventAnd(function(a){e.codeMirror.setCursor({line:b(),ch:1}),e.toggleTodo(!0)})),d},b.prototype.lineIsListItemOrIndented_=function(a){var b=this.getLineAttributes_(a);return(b[m.LIST_TYPE]||!1)!==!1||0!==(b[m.LINE_INDENT]||0)},b.prototype.onCursorActivity_=function(){var a=this;setTimeout(function(){a.updateCurrentAttributes_()},1)},b.prototype.getCurrentAttributes_=function(){return this.currentAttributes_||this.updateCurrentAttributes_(),this.currentAttributes_},b.prototype.updateCurrentAttributes_=function(){var b=this.codeMirror,c=b.indexFromPos(b.getCursor(&quot;anchor&quot;)),d=b.indexFromPos(b.getCursor(&quot;head&quot;)),e=d;if(c&gt;d){for(;e&lt;this.end();){var f=this.getRange(e,e+1);if(&quot;\n&quot;!==f&amp;&amp;f!==r)break;e++}e&lt;this.end()&amp;&amp;e++}else for(;e&gt;0&amp;&amp;(f=this.getRange(e-1,e),&quot;\n&quot;===f||f===r);)e--;var g=this.annotationList_.getAnnotatedSpansForPos(e);this.currentAttributes_={};var h={};g.length&gt;0&amp;&amp;!(m.LINE_SENTINEL in g[0].annotation.attributes)?h=g[0].annotation.attributes:g.length&gt;1&amp;&amp;(a.utils.assert(!(m.LINE_SENTINEL in g[1].annotation.attributes),&quot;Cursor can&#39;t be between two line sentinel characters.&quot;),h=g[1].annotation.attributes);for(var i in h)&quot;l&quot;!==i&amp;&amp;&quot;lt&quot;!==i&amp;&amp;&quot;li&quot;!==i&amp;&amp;0!==i.indexOf(m.ENTITY_SENTINEL)&amp;&amp;(this.currentAttributes_[i]=h[i])},b.prototype.getCurrentLineAttributes_=function(){var a=this.codeMirror,b=a.getCursor(&quot;anchor&quot;),c=a.getCursor(&quot;head&quot;),d=c.line;return 0===c.ch&amp;&amp;b.line&lt;c.line&amp;&amp;d--,this.getLineAttributes_(d)},b.prototype.getLineAttributes_=function(b){var c={},d=this.codeMirror.getLine(b);if(d.length&gt;0&amp;&amp;d[0]===r){var e=this.codeMirror.indexFromPos({line:b,ch:0}),f=this.annotationList_.getAnnotatedSpansForSpan(new k(e,1));a.utils.assert(1===f.length);for(var g in f[0].annotation.attributes)c[g]=f[0].annotation.attributes[g]}return c},b.prototype.clearAnnotations_=function(){this.annotationList_.updateSpan(new k(0,this.end()),function(a,b){return new g({})})},b.prototype.newline=function(){var a=this.codeMirror,b=this;if(this.emptySelection_()){var c=a.getCursor(&quot;head&quot;).line,d=this.getLineAttributes_(c),e=d[m.LIST_TYPE];e&amp;&amp;1===a.getLine(c).length?this.updateLineAttributes(c,c,function(a){delete a[m.LIST_TYPE],delete a[m.LINE_INDENT]}):(a.replaceSelection(&quot;\n&quot;,&quot;end&quot;,&quot;+input&quot;),this.updateLineAttributes(c+1,c+1,function(a){for(var f in d)a[f]=d[f];&quot;tc&quot;===e&amp;&amp;(a[m.LIST_TYPE]=&quot;t&quot;),b.trigger(&quot;newLine&quot;,{line:c+1,attr:a})}))}else a.replaceSelection(&quot;\n&quot;,&quot;end&quot;,&quot;+input&quot;)},b.prototype.deleteLeft=function(){var a=this.codeMirror,b=a.getCursor(&quot;head&quot;),c=this.getLineAttributes_(b.line),d=c[m.LIST_TYPE],e=c[m.LINE_INDENT],f=this.emptySelection_()&amp;&amp;1===b.ch;f&amp;&amp;d?this.updateLineAttributes(b.line,b.line,function(a){delete a[m.LIST_TYPE],delete a[m.LINE_INDENT]}):f&amp;&amp;e&amp;&amp;e&gt;0?this.unindent():a.deleteH(-1,&quot;char&quot;)},b.prototype.deleteRight=function(){var a=this.codeMirror,b=a.getCursor(&quot;head&quot;),c=a.getLine(b.line),d=this.areLineSentinelCharacters_(c),e=b.line+1&lt;a.lineCount()?a.getLine(b.line+1):&quot;&quot;;this.emptySelection_()&amp;&amp;d&amp;&amp;e[0]===r?(a.replaceRange(&quot;&quot;,{line:b.line,ch:0},{line:b.line+1,ch:0},&quot;+input&quot;),a.setCursor({line:b.line,ch:0})):a.deleteH(1,&quot;char&quot;)},b.prototype.indent=function(){this.updateLineAttributesForSelection(function(a){var b=a[m.LINE_INDENT],c=a[m.LIST_TYPE];b?a[m.LINE_INDENT]++:c?a[m.LINE_INDENT]=2:a[m.LINE_INDENT]=1})},b.prototype.unindent=function(){this.updateLineAttributesForSelection(function(a){var b=a[m.LINE_INDENT];b&amp;&amp;b&gt;1?a[m.LINE_INDENT]=b-1:(delete a[m.LIST_TYPE],delete a[m.LINE_INDENT])})},b.prototype.getText=function(){return this.codeMirror.getValue().replace(new RegExp(r,&quot;g&quot;),&quot;&quot;)},b.prototype.areLineSentinelCharacters_=function(a){for(var b=0;b&lt;a.length;b++)if(a[b]!==r)return!1;return!0},g.prototype.equals=function(a){if(!(a instanceof g))return!1;var b;for(b in this.attributes)if(a.attributes[b]!==this.attributes[b])return!1;for(b in a.attributes)if(a.attributes[b]!==this.attributes[b])return!1;return!0},b}();var a=a||{};a.RichTextCodeMirrorAdapter=function(){&quot;use strict&quot;;function b(a){this.rtcm=a,this.cm=a.codeMirror,g(this,&quot;onChange&quot;),g(this,&quot;onAttributesChange&quot;),g(this,&quot;onCursorActivity&quot;),g(this,&quot;onFocus&quot;),g(this,&quot;onBlur&quot;),this.rtcm.on(&quot;change&quot;,this.onChange),this.rtcm.on(&quot;attributesChange&quot;,this.onAttributesChange),this.cm.on(&quot;cursorActivity&quot;,this.onCursorActivity),this.cm.on(&quot;focus&quot;,this.onFocus),this.cm.on(&quot;blur&quot;,this.onBlur)}function c(a,b){return a.line&lt;b.line?-1:a.line&gt;b.line?1:a.ch&lt;b.ch?-1:a.ch&gt;b.ch?1:0}function d(a,b){return 0===c(a,b)}function e(a){var b=a.lineCount()-1;return a.indexFromPos({line:b,ch:a.getLine(b).length})}function f(a,b){if(!a)throw new Error(b||&quot;assertion error&quot;)}function g(a,b){var c=a[b];a[b]=function(){c.apply(a,arguments)}}function h(a){for(var b in a)return!1;return!0}function i(a,b){if(&quot;string&quot;!=typeof a)throw new TypeError(&quot;Expected a string&quot;);a=a.replace(/^#/,&quot;&quot;),3===a.length&amp;&amp;(a=a[0]+a[0]+a[1]+a[1]+a[2]+a[2]);var c=parseInt(a,16),d=[c&gt;&gt;16,c&gt;&gt;8&amp;255,255&amp;c],e=&quot;rgb&quot;;return j(b)&amp;&amp;(e=&quot;rgba&quot;,d.push(b)),e+&quot;(&quot;+d.join(&quot;,&quot;)+&quot;)&quot;}function j(a){return null!==a&amp;&amp;void 0!==a}var k=a.TextOperation,l=a.WrappedOperation,m=a.Cursor;return b.prototype.detach=function(){this.rtcm.off(&quot;change&quot;,this.onChange),this.rtcm.off(&quot;attributesChange&quot;,this.onAttributesChange),this.cm.off(&quot;cursorActivity&quot;,this.onCursorActivity),this.cm.off(&quot;focus&quot;,this.onFocus),this.cm.off(&quot;blur&quot;,this.onBlur)},b.operationFromCodeMirrorChanges=function(a,b){for(var c=e(b),d=(new k).retain(c),f=(new k).retain(c),g=a.length-1;g&gt;=0;g--){var h=a[g],i=h.start,j=c-i-h.text.length;d=(new k).retain(i)[&quot;delete&quot;](h.removed.length).insert(h.text,h.attributes).retain(j).compose(d),f=f.compose((new k).retain(i)[&quot;delete&quot;](h.text.length).insert(h.removed,h.removedAttributes).retain(j)),c+=h.removed.length-h.text.length}return[d,f]},b.operationFromAttributesChanges=function(a,b){for(var c=e(b),d=new k,g=new k,h=0,i=0;i&lt;a.length;i++){var j=a[i],l=j.start-h;f(l&gt;=0),d.retain(l),g.retain(l);var m=j.end-j.start;d.retain(m,j.attributes),g.retain(m,j.attributesInverse),h=j.start+m}return d.retain(c-h),g.retain(c-h),[d,g]},b.prototype.registerCallbacks=function(a){this.callbacks=a},b.prototype.onChange=function(a,c){if(&quot;RTCMADAPTER&quot;!==c[0].origin){var d=b.operationFromCodeMirrorChanges(c,this.cm);this.trigger(&quot;change&quot;,d[0],d[1])}},b.prototype.onAttributesChange=function(a,c){if(&quot;RTCMADAPTER&quot;!==c[0].origin){var d=b.operationFromAttributesChanges(c,this.cm);this.trigger(&quot;change&quot;,d[0],d[1])}},b.prototype.onCursorActivity=function(){var a=this;setTimeout(function(){a.trigger(&quot;cursorActivity&quot;)},1)},b.prototype.onFocus=function(){this.trigger(&quot;focus&quot;)},b.prototype.onBlur=function(){this.cm.somethingSelected()||this.trigger(&quot;blur&quot;)},b.prototype.getValue=function(){return this.cm.getValue()},b.prototype.getCursor=function(){var a,b=this.cm,c=b.getCursor(),e=b.indexFromPos(c);if(b.somethingSelected()){var f=b.getCursor(!0),g=d(c,f)?b.getCursor(!1):f;a=b.indexFromPos(g)}else a=e;return new m(e,a)},b.prototype.setCursor=function(a){this.cm.setSelection(this.cm.posFromIndex(a.position),this.cm.posFromIndex(a.selectionEnd))},b.prototype.addStyleRule=function(a){if(&quot;undefined&quot;!=typeof document&amp;&amp;null!==document){if(!this.addedStyleRules){this.addedStyleRules={};var b=document.createElement(&quot;style&quot;);document.documentElement.getElementsByTagName(&quot;head&quot;)[0].appendChild(b),this.addedStyleSheet=b.sheet}if(!this.addedStyleRules[a])return this.addedStyleRules[a]=!0,</td>
      </tr>
      <tr>
        <td id="L3" class="blob-num js-line-number" data-line-number="3"></td>
        <td id="LC3" class="blob-code blob-code-inner js-file-line">this.addedStyleSheet.insertRule(a,0)}},b.prototype.setOtherCursor=function(a,b,c){var d=this.cm.posFromIndex(a.position);if(&quot;string&quot;==typeof b&amp;&amp;b.match(/^#[a-fA-F0-9]{3,6}$/)){var e=this.rtcm.end();if(&quot;object&quot;==typeof a&amp;&amp;&quot;number&quot;==typeof a.position&amp;&amp;&quot;number&quot;==typeof a.selectionEnd&amp;&amp;!(a.position&lt;0||a.position&gt;e||a.selectionEnd&lt;0||a.selectionEnd&gt;e)){if(a.position===a.selectionEnd){var f=this.cm.cursorCoords(d),g=document.createElement(&quot;span&quot;);return g.className=&quot;other-client&quot;,g.style.borderLeftWidth=&quot;2px&quot;,g.style.borderLeftStyle=&quot;solid&quot;,g.style.borderLeftColor=b,g.style.marginLeft=g.style.marginRight=&quot;-1px&quot;,g.style.height=.9*(f.bottom-f.top)+&quot;px&quot;,g.setAttribute(&quot;data-clientid&quot;,c),g.style.zIndex=0,this.cm.setBookmark(d,{widget:g,insertLeft:!0})}var h=&quot;selection-&quot;+b.replace(&quot;#&quot;,&quot;&quot;),j=.4,k=&quot;.&quot;+h+&quot; { background: &quot;+i(b)+&quot;;\n background: &quot;+i(b,j)+&quot;;}&quot;;this.addStyleRule(k);var l,m;return a.selectionEnd&gt;a.position?(l=d,m=this.cm.posFromIndex(a.selectionEnd)):(l=this.cm.posFromIndex(a.selectionEnd),m=d),this.cm.markText(l,m,{className:h})}}},b.prototype.trigger=function(a){var b=Array.prototype.slice.call(arguments,1),c=this.callbacks&amp;&amp;this.callbacks[a];c&amp;&amp;c.apply(this,b)},b.prototype.applyOperation=function(a){a.ops.length&gt;10&amp;&amp;this.rtcm.codeMirror.getWrapperElement().setAttribute(&quot;style&quot;,&quot;display: none&quot;);for(var b=a.ops,c=0,d=0,e=b.length;e&gt;d;d++){var f=b[d];f.isRetain()?(h(f.attributes)||this.rtcm.updateTextAttributes(c,c+f.chars,function(a){for(var b in f.attributes)f.attributes[b]===!1?delete a[b]:a[b]=f.attributes[b]},&quot;RTCMADAPTER&quot;,!0),c+=f.chars):f.isInsert()?(this.rtcm.insertText(c,f.text,f.attributes,&quot;RTCMADAPTER&quot;),c+=f.text.length):f.isDelete()&amp;&amp;this.rtcm.removeText(c,c+f.chars,&quot;RTCMADAPTER&quot;)}a.ops.length&gt;10&amp;&amp;(this.rtcm.codeMirror.getWrapperElement().setAttribute(&quot;style&quot;,&quot;&quot;),this.rtcm.codeMirror.refresh())},b.prototype.registerUndo=function(a){this.cm.undo=a},b.prototype.registerRedo=function(a){this.cm.redo=a},b.prototype.invertOperation=function(a){for(var b,c,d=0,e=this.rtcm.codeMirror,f=new k,g=0;g&lt;a.wrapped.ops.length;g++){var i=a.wrapped.ops[g];if(i.isRetain())if(h(i.attributes))f.retain(i.chars),d+=i.chars;else for(b=this.rtcm.getAttributeSpans(d,d+i.chars),c=0;c&lt;b.length;c++){var j={};for(var m in i.attributes){var n=i.attributes[m],o=b[c].attributes[m];n===!1?o&amp;&amp;(j[m]=o):n!==o&amp;&amp;(j[m]=o||!1)}f.retain(b[c].length,j),d+=b[c].length}else if(i.isInsert())f[&quot;delete&quot;](i.text.length);else if(i.isDelete()){var p=e.getRange(e.posFromIndex(d),e.posFromIndex(d+i.chars));b=this.rtcm.getAttributeSpans(d,d+i.chars);var q=0;for(c=0;c&lt;b.length;c++)f.insert(p.substr(q,b[c].length),b[c].attributes),q+=b[c].length;d+=i.chars}}return new l(f,a.meta.invert())},b}();var a=a||{};a.Formatting=function(){function b(a){return this instanceof b?void(this.attributes=a||{}):new b(a)}var c=a.AttributeConstants;return b.prototype.cloneWithNewAttribute_=function(a,c){var d={};for(var e in this.attributes)d[e]=this.attributes[e];return c===!1?delete d[a]:d[a]=c,new b(d)},b.prototype.bold=function(a){return this.cloneWithNewAttribute_(c.BOLD,a)},b.prototype.italic=function(a){return this.cloneWithNewAttribute_(c.ITALIC,a)},b.prototype.underline=function(a){return this.cloneWithNewAttribute_(c.UNDERLINE,a)},b.prototype.strike=function(a){return this.cloneWithNewAttribute_(c.STRIKE,a)},b.prototype.font=function(a){return this.cloneWithNewAttribute_(c.FONT,a)},b.prototype.fontSize=function(a){return this.cloneWithNewAttribute_(c.FONT_SIZE,a)},b.prototype.color=function(a){return this.cloneWithNewAttribute_(c.COLOR,a)},b.prototype.backgroundColor=function(a){return this.cloneWithNewAttribute_(c.BACKGROUND_COLOR,a)},b}();var a=a||{};a.Text=function(){function b(c,d){return this instanceof b?(this.text=c,void(this.formatting=d||a.Formatting())):new b(c,d)}return b}();var a=a||{};a.LineFormatting=function(){function b(a){return this instanceof b?(this.attributes=a||{},void(this.attributes[c.LINE_SENTINEL]=!0)):new b(a)}var c=a.AttributeConstants;return b.LIST_TYPE={NONE:!1,ORDERED:&quot;o&quot;,UNORDERED:&quot;u&quot;,TODO:&quot;t&quot;,TODOCHECKED:&quot;tc&quot;},b.prototype.cloneWithNewAttribute_=function(a,c){var d={};for(var e in this.attributes)d[e]=this.attributes[e];return c===!1?delete d[a]:d[a]=c,new b(d)},b.prototype.indent=function(a){return this.cloneWithNewAttribute_(c.LINE_INDENT,a)},b.prototype.align=function(a){return this.cloneWithNewAttribute_(c.LINE_ALIGN,a)},b.prototype.listItem=function(b){return a.utils.assert(b===!1||&quot;u&quot;===b||&quot;o&quot;===b||&quot;t&quot;===b||&quot;tc&quot;===b),this.cloneWithNewAttribute_(c.LIST_TYPE,b)},b.prototype.getIndent=function(){return this.attributes[c.LINE_INDENT]||0},b.prototype.getAlign=function(){return this.attributes[c.LINE_ALIGN]||0},b.prototype.getListItem=function(){return this.attributes[c.LIST_TYPE]||!1},b}();var a=a||{};a.Line=function(){function b(c,d){return this instanceof b?(&quot;[object Array]&quot;!==Object.prototype.toString.call(c)&amp;&amp;(c=&quot;undefined&quot;==typeof c?[]:[c]),this.textPieces=c,void(this.formatting=d||a.LineFormatting())):new b(c,d)}return b}();var a=a||{};a.ParseHtml=function(){function b(b,c,d){this.listType=b||i.UNORDERED,this.lineFormatting=c||a.LineFormatting(),this.textFormatting=d||a.Formatting()}function c(){this.lines=[],this.currentLine=[],this.currentLineListItemType=null}function d(d,f){var g=(a.document||document).createElement(&quot;div&quot;);g.innerHTML=d,j=f;var h=new c,i=new b;return e(g,i,h),h.lines}function e(b,c,d){if(b.nodeType===k.ELEMENT_NODE){var e=j.fromElement(b);if(e)return void d.currentLine.push(new a.Text(a.sentinelConstants.ENTITY_SENTINEL_CHARACTER,new a.Formatting(e.toAttributes())))}switch(b.nodeType){case k.TEXT_NODE:var l=b.nodeValue.replace(/[ \n\t]+/g,&quot; &quot;);d.currentLine.push(a.Text(l,c.textFormatting));break;case k.ELEMENT_NODE:var m=b.getAttribute(&quot;style&quot;)||&quot;&quot;;switch(c=h(c,m),b.nodeName.toLowerCase()){case&quot;div&quot;:case&quot;h1&quot;:case&quot;h2&quot;:case&quot;h3&quot;:case&quot;p&quot;:d.newlineIfNonEmpty(c),f(b,c,d),d.newlineIfNonEmpty(c);break;case&quot;center&quot;:c=c.withAlign(&quot;center&quot;),d.newlineIfNonEmpty(c),f(b,c.withAlign(&quot;center&quot;),d),d.newlineIfNonEmpty(c);break;case&quot;b&quot;:case&quot;strong&quot;:f(b,c.withTextFormatting(c.textFormatting.bold(!0)),d);break;case&quot;u&quot;:f(b,c.withTextFormatting(c.textFormatting.underline(!0)),d);break;case&quot;i&quot;:case&quot;em&quot;:f(b,c.withTextFormatting(c.textFormatting.italic(!0)),d);break;case&quot;s&quot;:f(b,c.withTextFormatting(c.textFormatting.strike(!0)),d);break;case&quot;font&quot;:var n=b.getAttribute(&quot;face&quot;),o=b.getAttribute(&quot;color&quot;),p=parseInt(b.getAttribute(&quot;size&quot;));n&amp;&amp;(c=c.withTextFormatting(c.textFormatting.font(n))),o&amp;&amp;(c=c.withTextFormatting(c.textFormatting.color(o))),p&amp;&amp;(c=c.withTextFormatting(c.textFormatting.fontSize(p))),f(b,c,d);break;case&quot;br&quot;:d.newline(c);break;case&quot;ul&quot;:d.newlineIfNonEmptyOrListItem(c);var q=&quot;firepad-todo&quot;===b.getAttribute(&quot;class&quot;)?i.TODO:i.UNORDERED;f(b,c.withListType(q).withIncreasedIndent(),d),d.newlineIfNonEmpty(c);break;case&quot;ol&quot;:d.newlineIfNonEmptyOrListItem(c),f(b,c.withListType(i.ORDERED).withIncreasedIndent(),d),d.newlineIfNonEmpty(c);break;case&quot;li&quot;:g(b,c,d);break;case&quot;style&quot;:break;default:f(b,c,d)}}}function f(a,b,c){if(a.hasChildNodes())for(var d=0;d&lt;a.childNodes.length;d++)e(a.childNodes[d],b,c)}function g(a,b,c){c.newlineIfNonEmptyOrListItem(b);var d=&quot;firepad-checked&quot;===a.getAttribute(&quot;class&quot;)?i.TODOCHECKED:b.listType;c.makeListItem(d);var e=c.currentLine;f(a,b,c),(e===c.currentLine||c.currentLine.length&gt;0)&amp;&amp;c.newline(b)}function h(b,c){for(var d=b.textFormatting,e=b.lineFormatting,f=c.split(&quot;;&quot;),g=0;g&lt;f.length;g++){var h=f[g].split(&quot;:&quot;);if(2===h.length){var i=a.utils.trim(h[0]).toLowerCase(),j=a.utils.trim(h[1]).toLowerCase();switch(i){case&quot;text-decoration&quot;:var k=j.indexOf(&quot;underline&quot;)&gt;=0,l=j.indexOf(&quot;line-through&quot;)&gt;=0;d=d.underline(k).strike(l);break;case&quot;font-weight&quot;:var m=&quot;bold&quot;===j||parseInt(j)&gt;=600;d=d.bold(m);break;case&quot;font-style&quot;:var n=&quot;italic&quot;===j||&quot;oblique&quot;===j;d=d.italic(n);break;case&quot;color&quot;:d=d.color(j);break;case&quot;background-color&quot;:d=d.backgroundColor(j);break;case&quot;text-align&quot;:e=e.align(j);break;case&quot;font-size&quot;:var o=null,p=[&quot;px&quot;,&quot;pt&quot;,&quot;%&quot;,&quot;em&quot;,&quot;xx-small&quot;,&quot;x-small&quot;,&quot;small&quot;,&quot;medium&quot;,&quot;large&quot;,&quot;x-large&quot;,&quot;xx-large&quot;,&quot;smaller&quot;,&quot;larger&quot;];a.utils.stringEndsWith(j,p)?o=j:parseInt(j)&amp;&amp;(o=parseInt(j)+&quot;px&quot;),o&amp;&amp;(d=d.fontSize(o));break;case&quot;font-family&quot;:var q=a.utils.trim(j.split(&quot;,&quot;)[0]);q=q.replace(/[&#39;&quot;]/g,&quot;&quot;),q=q.replace(/\w\S*/g,function(a){return a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()}),d=d.font(q)}}}return b.withLineFormatting(e).withTextFormatting(d)}var i=a.LineFormatting.LIST_TYPE;b.prototype.withTextFormatting=function(a){return new b(this.listType,this.lineFormatting,a)},b.prototype.withLineFormatting=function(a){return new b(this.listType,a,this.textFormatting)},b.prototype.withListType=function(a){return new b(a,this.lineFormatting,this.textFormatting)},b.prototype.withIncreasedIndent=function(){var a=this.lineFormatting.indent(this.lineFormatting.getIndent()+1);return new b(this.listType,a,this.textFormatting)},b.prototype.withAlign=function(a){var c=this.lineFormatting.align(a);return new b(this.listType,c,this.textFormatting)},c.prototype.newlineIfNonEmpty=function(a){this.cleanLine_(),this.currentLine.length&gt;0&amp;&amp;this.newline(a)},c.prototype.newlineIfNonEmptyOrListItem=function(a){this.cleanLine_(),(this.currentLine.length&gt;0||null!==this.currentLineListItemType)&amp;&amp;this.newline(a)},c.prototype.newline=function(b){this.cleanLine_();var c=b.lineFormatting;null!==this.currentLineListItemType&amp;&amp;(c=c.listItem(this.currentLineListItemType),this.currentLineListItemType=null),this.lines.push(a.Line(this.currentLine,c)),this.currentLine=[]},c.prototype.makeListItem=function(a){this.currentLineListItemType=a},c.prototype.cleanLine_=function(){if(this.currentLine.length&gt;0){var a=this.currentLine.length-1;this.currentLine[0].text=this.currentLine[0].text.replace(/^ +/,&quot;&quot;),this.currentLine[a].text=this.currentLine[a].text.replace(/ +$/g,&quot;&quot;);for(var b=0;b&lt;this.currentLine.length;b++)this.currentLine[b].text=this.currentLine[b].text.replace(/\u00a0/g,&quot; &quot;)}1===this.currentLine.length&amp;&amp;&quot;&quot;===this.currentLine[0].text&amp;&amp;(this.currentLine=[])};var j,k=k||{ELEMENT_NODE:1,TEXT_NODE:3};return d}();var a=a||{};a.SerializeHtml=function(){function b(a){return a===i.ORDERED?&quot;&lt;ol&gt;&quot;:a===i.UNORDERED?&quot;&lt;ul&gt;&quot;:&#39;&lt;ul class=&quot;firepad-todo&quot;&gt;&#39;}function c(a){return a===i.ORDERED?&quot;&lt;/ol&gt;&quot;:&quot;&lt;/ul&gt;&quot;}function d(a,b){return a===b||a===i.TODO&amp;&amp;b===i.TODOCHECKED||a===i.TODOCHECKED&amp;&amp;b===i.TODO}function e(a){return a.replace(/&amp;/g,&quot;&amp;amp;&quot;).replace(/&quot;/g,&quot;&amp;quot;&quot;).replace(/&#39;/g,&quot;&amp;#39;&quot;).replace(/&lt;/g,&quot;&amp;lt;&quot;).replace(/&gt;/g,&quot;&amp;gt;&quot;).replace(/\u00a0/g,&quot;&amp;nbsp;&quot;)}function f(f,k){for(var l=&quot;&quot;,m=!0,n=[],o=!1,p=!0,q=!0,r=0,s=f.ops[r],t=!1;s;){g.assert(s.isInsert());var u=s.attributes;if(m){m=!1;var v=0,w=null,x=&quot;left&quot;;h.LINE_SENTINEL in u&amp;&amp;(v=u[h.LINE_INDENT]||0,w=u[h.LIST_TYPE]||null,x=u[h.LINE_ALIGN]||&quot;left&quot;),w&amp;&amp;(v=v||1),o?(l+=&quot;&lt;/li&gt;&quot;,o=!1):p||(q&amp;&amp;(l+=&quot;&lt;br/&gt;&quot;),l+=&quot;&lt;/div&gt;&quot;),p=!1,g.assert(v&gt;=0,&quot;Indent must not be negative.&quot;);for(;n.length&gt;v||v===n.length&amp;&amp;null!==w&amp;&amp;!d(w,n[n.length-1]);)l+=c(n.pop());for(;n.length&lt;v;){var y=w||i.UNORDERED;t=w==i.TODO||w==i.TODOCHECKED||t,l+=b(y),n.push(y)}var z=&quot;left&quot;!==x?&#39; style=&quot;text-align:&#39;+x+&#39;&quot;&#39;:&quot;&quot;;if(w){var A=&quot;&quot;;switch(w){case i.TODOCHECKED:A=&#39; class=&quot;firepad-checked&quot;&#39;;break;case i.TODO:A=&#39; class=&quot;firepad-unchecked&quot;&#39;}l+=&quot;&lt;li&quot;+A+z+&quot;&gt;&quot;,o=!0}else l+=&quot;&lt;div&quot;+z+&quot;&gt;&quot;;q=!0}if(h.LINE_SENTINEL in u)s=f.ops[++r];else if(h.ENTITY_SENTINEL in u){for(var B=0;B&lt;s.text.length;B++){var C=a.Entity.fromAttributes(u),D=k.exportToElement(C);l+=D.outerHTML}s=f.ops[++r]}else{var E=&quot;&quot;,F=&quot;&quot;;for(var G in u){var H,I,J=u[G];G===h.BOLD||G===h.ITALIC||G===h.UNDERLINE||G===h.STRIKE?(g.assert(J===!0),H=I=G):G===h.FONT_SIZE?(H=&#39;span style=&quot;font-size: &#39;+J,H+=&quot;string&quot;!=typeof J||-1===J.indexOf(&quot;px&quot;,J.length-2)?&#39;px&quot;&#39;:&#39;&quot;&#39;,I=&quot;span&quot;):G===h.FONT?(H=&#39;span style=&quot;font-family: &#39;+J+&#39;&quot;&#39;,I=&quot;span&quot;):G===h.COLOR?(H=&#39;span style=&quot;color: &#39;+J+&#39;&quot;&#39;,I=&quot;span&quot;):G===h.BACKGROUND_COLOR?(H=&#39;span style=&quot;background-color: &#39;+J+&#39;&quot;&#39;,I=&quot;span&quot;):g.log(!1,&quot;Encountered unknown attribute while rendering html: &quot;+G),H&amp;&amp;(E+=&quot;&lt;&quot;+H+&quot;&gt;&quot;),I&amp;&amp;(F=&quot;&lt;/&quot;+I+&quot;&gt;&quot;+F)}var K=s.text,L=K.indexOf(&quot;\n&quot;);L&gt;=0?(m=!0,s=L&lt;K.length-1?new a.TextOp(&quot;insert&quot;,K.substr(L+1),u):f.ops[++r],K=K.substr(0,L)):s=f.ops[++r],K=K.replace(/  +/g,function(a){return new Array(a.length+1).join(&quot; &quot;)}).replace(/^ /,&quot; &quot;).replace(/ $/,&quot; &quot;),K.length&gt;0&amp;&amp;(q=!1),l+=E+e(K)+F}}for(o?l+=&quot;&lt;/li&gt;&quot;:p||(q&amp;&amp;(l+=&quot;&amp;nbsp;&quot;),l+=&quot;&lt;/div&gt;&quot;);n.length&gt;0;)l+=c(n.pop());return t&amp;&amp;(l=j+l),l}var g=a.utils,h=a.AttributeConstants,i=a.LineFormatting.LIST_TYPE,j=&#39;&lt;style&gt;ul.firepad-todo { list-style: none; margin-left: 0; padding-left: 0; } ul.firepad-todo &gt; li { padding-left: 1em; text-indent: -1em; } ul.firepad-todo &gt; li:before { content: &quot;\\2610&quot;; padding-right: 5px; } ul.firepad-todo &gt; li.firepad-checked:before { content: &quot;\\2611&quot;; padding-right: 5px; }&lt;/style&gt;\n&#39;;return f}();var a=a||{};a.textPiecesToInserts=function(b,c){function d(c,d){c instanceof a.Text&amp;&amp;(d=c.formatting.attributes,c=c.text),f.push({string:c,attributes:d}),b=&quot;\n&quot;===c[c.length-1]}function e(c,e){b&amp;&amp;d(a.sentinelConstants.LINE_SENTINEL_CHARACTER,c.formatting.attributes);for(var f=0;f&lt;c.textPieces.length;f++)d(c.textPieces[f]);e&amp;&amp;d(&quot;\n&quot;)}for(var f=[],g=0;g&lt;c.length;g++)c[g]instanceof a.Line?e(c[g],g&lt;c.length-1):d(c[g]);return f};var a=a||{};a.Headless=function(){function b(a){if(!(this instanceof b))return new b(a);var c,f;&quot;string&quot;==typeof a?(void 0===window.firebase&amp;&amp;&quot;object&quot;!=typeof c?(console.log(&quot;REQUIRING&quot;),c=require(&quot;firebase&quot;)):c=window.firebase,f=c.database().refFromURL(a)):f=a,this.entityManager_=new e,this.firebaseAdapter_=new d(f),this.ready_=!1,this.zombie_=!1}var c=a.TextOperation,d=a.FirebaseAdapter,e=a.EntityManager,f=a.ParseHtml;return b.prototype.getDocument=function(a){var b=this;return b.ready_?a(b.firebaseAdapter_.getDocument()):void b.firebaseAdapter_.on(&quot;ready&quot;,function(){b.ready_=!0,a(b.firebaseAdapter_.getDocument())})},b.prototype.getText=function(b){if(this.zombie_)throw new Error(&quot;You can&#39;t use a firepad.Headless after calling dispose()!&quot;);this.getDocument(function(c){var d=c.apply(&quot;&quot;);for(key in a.sentinelConstants)d=d.replace(new RegExp(a.sentinelConstants[key],&quot;g&quot;),&quot;&quot;);b(d)})},b.prototype.setText=function(a,b){if(this.zombie_)throw new Error(&quot;You can&#39;t use a firepad.Headless after calling dispose()!&quot;);var d=c().insert(a);this.sendOperationWithRetry(d,b)},b.prototype.initializeFakeDom=function(b){&quot;object&quot;==typeof document||&quot;object&quot;==typeof a.document?b():require(&quot;jsdom&quot;).env(&quot;&lt;head&gt;&lt;/head&gt;&lt;body&gt;&lt;/body&gt;&quot;,function(c,d){return a.document?(d.close(),b()):(a.document=d.document,void b())})},b.prototype.getHtml=function(b){var c=this;if(this.zombie_)throw new Error(&quot;You can&#39;t use a firepad.Headless after calling dispose()!&quot;);c.initializeFakeDom(function(){c.getDocument(function(d){b(a.SerializeHtml(d,c.entityManager_))})})},b.prototype.setHtml=function(b,d){var e=this;if(this.zombie_)throw new Error(&quot;You can&#39;t use a firepad.Headless after calling dispose()!&quot;);e.initializeFakeDom(function(){for(var g=f(b,e.entityManager_),h=a.textPiecesToInserts(!0,g),i=new c,j=0;j&lt;h.length;j++)i.insert(h[j].string,h[j].attributes);e.sendOperationWithRetry(i,d)})},b.prototype.sendOperationWithRetry=function(a,b){var c=this;c.getDocument(function(d){var e=a.clone()[&quot;delete&quot;](d.targetLength);c.firebaseAdapter_.sendOperation(e,function(d,e){e?&quot;undefined&quot;!=typeof b&amp;&amp;b(null,e):c.sendOperationWithRetry(a,b)})})},b.prototype.dispose=function(){this.zombie_=!0,this.firebaseAdapter_.dispose()},b}();var a=a||{};return a.Firepad=function(b){function c(a,b,e){if(!(this instanceof c))return new c(a,b,e);if(!p&amp;&amp;!q)throw new Error(&quot;Couldn&#39;t find CodeMirror or ACE.  Did you forget to include codemirror.js or ace.js?&quot;);if(this.zombie_=!1,p&amp;&amp;b instanceof p){this.codeMirror_=this.editor_=b;var f=this.codeMirror_.getValue();if(&quot;&quot;!==f)throw new Error(&quot;Can&#39;t initialize Firepad with a CodeMirror instance that already contains text.&quot;)}else if(q&amp;&amp;b&amp;&amp;b.session instanceof q.EditSession){if(this.ace_=this.editor_=b,f=this.ace_.getValue(),&quot;&quot;!==f)throw new Error(&quot;Can&#39;t initialize Firepad with an ACE instance that already contains text.&quot;)}else this.codeMirror_=this.editor_=new p(b);var i=this.codeMirror_?this.codeMirror_.getWrapperElement():this.ace_.container;this.firepadWrapper_=o.elt(&quot;div&quot;,null,{&quot;class&quot;:&quot;firepad&quot;}),i.parentNode.replaceChild(this.firepadWrapper_,i),this.firepadWrapper_.appendChild(i),o.on(i,&quot;dragstart&quot;,o.stopEvent),this.editor_.firepad=this,this.options_=e||{},this.getOption(&quot;richTextShortcuts&quot;,!1)&amp;&amp;(p.keyMap.richtext||this.initializeKeyMap_(),this.codeMirror_.setOption(&quot;keyMap&quot;,&quot;richtext&quot;),this.firepadWrapper_.className+=&quot; firepad-richtext&quot;),this.imageInsertionUI=this.getOption(&quot;imageInsertionUI&quot;,!0),this.getOption(&quot;richTextToolbar&quot;,!1)&amp;&amp;(this.addToolbar_(),this.firepadWrapper_.className+=&quot; firepad-richtext firepad-with-toolbar&quot;),this.addPoweredByLogo_(),this.codeMirror_&amp;&amp;this.codeMirror_.refresh();var n=this.getOption(&quot;userId&quot;,a.push().key),r=this.getOption(&quot;userColor&quot;,d(n));this.entityManager_=new m,this.firebaseAdapter_=new k(a,n,r),this.codeMirror_?(this.richTextCodeMirror_=new h(this.codeMirror_,this.entityManager_,{cssPrefix:&quot;firepad-&quot;}),this.editorAdapter_=new g(this.richTextCodeMirror_)):this.editorAdapter_=new j(this.ace_),this.client_=new l(this.firebaseAdapter_,this.editorAdapter_);var s=this;this.firebaseAdapter_.on(&quot;cursor&quot;,function(){s.trigger.apply(s,[&quot;cursor&quot;].concat([].slice.call(arguments)))}),this.codeMirror_&amp;&amp;this.richTextCodeMirror_.on(&quot;newLine&quot;,function(){s.trigger.apply(s,[&quot;newLine&quot;].concat([].slice.call(arguments)))}),this.firebaseAdapter_.on(&quot;ready&quot;,function(){s.ready_=!0,this.ace_&amp;&amp;this.editorAdapter_.grabDocumentState();var a=s.getOption(&quot;defaultText&quot;,null);a&amp;&amp;s.isHistoryEmpty()&amp;&amp;s.setText(a),s.trigger(&quot;ready&quot;)}),this.client_.on(&quot;synced&quot;,function(a){s.trigger(&quot;synced&quot;,a)}),&quot;Microsoft Internet Explorer&quot;==navigator.appName&amp;&amp;navigator.userAgent.match(/MSIE 8\./)&amp;&amp;(window.onload=function(){var a=document.getElementsByTagName(&quot;head&quot;)[0],b=document.createElement(&quot;style&quot;);b.type=&quot;text/css&quot;,b.styleSheet.cssText=&quot;:before,:after{content:none !important;}&quot;,a.appendChild(b),setTimeout(function(){a.removeChild(b)},0)})}function d(a){for(var b=1,c=0;c&lt;a.length;c++)b=17*(b+a.charCodeAt(c))%360;var d=b/360;return f(d,1,.75)}function e(a,b,c){function d(a){var b=Math.round(255*a).toString(16);return 1===b.length?&quot;0&quot;+b:b}return&quot;#&quot;+d(a)+d(b)+d(c)}function f(a,b,c){if(0===b)return e(c,c,c);var d=.5&gt;c?c*(1+b):c+b-b*c,f=2*c-d,g=function(a){return 0&gt;a&amp;&amp;(a+=1),a&gt;1&amp;&amp;(a-=1),1&gt;6*a?f+6*(d-f)*a:1&gt;2*a?d:2&gt;3*a?f+6*(d-f)*(2/3-a):f};return e(g(a+1/3),g(a),g(a-1/3))}if(!a.RichTextCodeMirrorAdapter)throw new Error(&quot;Oops! It looks like you&#39;re trying to include lib/firepad.js directly.  This is actually one of many source files that make up firepad.  You want dist/firepad.js instead.&quot;);var g=a.RichTextCodeMirrorAdapter,h=a.RichTextCodeMirror,i=a.RichTextToolbar,j=a.ACEAdapter,k=a.FirebaseAdapter,l=a.EditorClient,m=a.EntityManager,n=a.AttributeConstants,o=a.utils,p=(a.LineFormatting.LIST_TYPE,b.CodeMirror),q=b.ace;return o.makeEventEmitter(c),c.fromCodeMirror=c,c.fromACE=c,c.prototype.dispose=function(){this.zombie_=!0;var a=this.codeMirror_?this.codeMirror_.getWrapperElement():this.ace_.container;this.firepadWrapper_.removeChild(a),this.firepadWrapper_.parentNode.replaceChild(a,this.firepadWrapper_),this.editor_.firepad=null,this.codeMirror_&amp;&amp;&quot;richtext&quot;===this.codeMirror_.getOption(&quot;keyMap&quot;)&amp;&amp;this.codeMirror_.setOption(&quot;keyMap&quot;,&quot;default&quot;),this.firebaseAdapter_.dispose(),this.editorAdapter_.detach(),this.richTextCodeMirror_&amp;&amp;this.richTextCodeMirror_.detach()},c.prototype.setUserId=function(a){this.firebaseAdapter_.setUserId(a)},c.prototype.setUserColor=function(a){this.firebaseAdapter_.setColor(a)},c.prototype.getText=function(){return this.assertReady_(&quot;getText&quot;),this.codeMirror_?this.richTextCodeMirror_.getText():this.ace_.getSession().getDocument().getValue()},c.prototype.setText=function(a){return this.assertReady_(&quot;setText&quot;),this.ace_?this.ace_.getSession().getDocument().setValue(a):(this.codeMirror_.getWrapperElement().setAttribute(&quot;style&quot;,&quot;display: none&quot;),this.codeMirror_.setValue(&quot;&quot;),this.insertText(0,a),this.codeMirror_.getWrapperElement().setAttribute(&quot;style&quot;,&quot;&quot;),this.codeMirror_.refresh(),void this.editorAdapter_.setCursor({position:0,selectionEnd:0}))},c.prototype.insertTextAtCursor=function(a){this.insertText(this.codeMirror_.indexFromPos(this.codeMirror_.getCursor()),a)},c.prototype.insertText=function(b,c){o.assert(!this.ace_,&quot;Not supported for ace yet.&quot;),this.assertReady_(&quot;insertText&quot;),&quot;[object Array]&quot;!==Object.prototype.toString.call(c)&amp;&amp;(c=[c]);var d=this;d.codeMirror_.operation(function(){for(var e=0===b,f=a.textPiecesToInserts(e,c),g=0;g&lt;f.length;g++){var h=f[g].string,i=f[g].attributes;d.richTextCodeMirror_.insertText(b,h,i),b+=h.length}})},c.prototype.getOperationForSpan=function(b,c){for(var d=this.richTextCodeMirror_.getRange(b,c),e=this.richTextCodeMirror_.getAttributeSpans(b,c),f=0,g=new a.TextOperation,h=0;h&lt;e.length;h++)g.insert(d.substr(f,e[h].length),e[h].attributes),f+=e[h].length;return g},c.prototype.getHtml=function(){return this.getHtmlFromRange(null,null)},c.prototype.getHtmlFromSelection=function(){var a=this.codeMirror_.getCursor(&quot;start&quot;),b=this.codeMirror_.getCursor(&quot;end&quot;),c=this.codeMirror_.indexFromPos(a),d=this.codeMirror_.indexFromPos(b);return this.getHtmlFromRange(c,d)},c.prototype.getHtmlFromRange=function(b,c){this.assertReady_(&quot;getHtmlFromRange&quot;);var d=null!=b&amp;&amp;null!=c?this.getOperationForSpan(b,c):this.getOperationForSpan(0,this.codeMirror_.getValue().length);return a.SerializeHtml(d,this.entityManager_)},c.prototype.insertHtml=function(b,c){var d=a.ParseHtml(c,this.entityManager_);this.insertText(b,d)},c.prototype.insertHtmlAtCursor=function(a){this.insertHtml(this.codeMirror_.indexFromPos(this.codeMirror_.getCursor()),a)},c.prototype.setHtml=function(b){var c=a.ParseHtml(b,this.entityManager_);this.setText(c)},c.prototype.isHistoryEmpty=function(){return this.assertReady_(&quot;isHistoryEmpty&quot;),this.firebaseAdapter_.isHistoryEmpty()},c.prototype.bold=function(){this.richTextCodeMirror_.toggleAttribute(n.BOLD),this.codeMirror_.focus()},c.prototype.italic=function(){this.richTextCodeMirror_.toggleAttribute(n.ITALIC),this.codeMirror_.focus()},c.prototype.underline=function(){this.richTextCodeMirror_.toggleAttribute(n.UNDERLINE),this.codeMirror_.focus()},c.prototype.strike=function(){this.richTextCodeMirror_.toggleAttribute(n.STRIKE),this.codeMirror_.focus()},c.prototype.fontSize=function(a){this.richTextCodeMirror_.setAttribute(n.FONT_SIZE,a),this.codeMirror_.focus()},c.prototype.font=function(a){this.richTextCodeMirror_.setAttribute(n.FONT,a),this.codeMirror_.focus()},c.prototype.color=function(a){this.richTextCodeMirror_.setAttribute(n.COLOR,a),this.codeMirror_.focus()},c.prototype.highlight=function(){this.richTextCodeMirror_.toggleAttribute(n.BACKGROUND_COLOR,&quot;rgba(255,255,0,.65)&quot;),this.codeMirror_.focus()},c.prototype.align=function(a){if(&quot;left&quot;!==a&amp;&amp;&quot;center&quot;!==a&amp;&amp;&quot;right&quot;!==a)throw new Error(&#39;align() must be passed &quot;left&quot;, &quot;center&quot;, or &quot;right&quot;.&#39;);this.richTextCodeMirror_.setLineAttribute(n.LINE_ALIGN,a),this.codeMirror_.focus()},c.prototype.orderedList=function(){this.richTextCodeMirror_.toggleLineAttribute(n.LIST_TYPE,&quot;o&quot;),this.codeMirror_.focus()},c.prototype.unorderedList=function(){this.richTextCodeMirror_.toggleLineAttribute(n.LIST_TYPE,&quot;u&quot;),this.codeMirror_.focus()},c.prototype.todo=function(){this.richTextCodeMirror_.toggleTodo(),this.codeMirror_.focus()},c.prototype.newline=function(){this.richTextCodeMirror_.newline()},c.prototype.deleteLeft=function(){this.richTextCodeMirror_.deleteLeft()},c.prototype.deleteRight=function(){this.richTextCodeMirror_.deleteRight()},c.prototype.indent=function(){this.richTextCodeMirror_.indent(),this.codeMirror_.focus()},c.prototype.unindent=function(){this.richTextCodeMirror_.unindent(),this.codeMirror_.focus()},c.prototype.undo=function(){this.codeMirror_.undo()},c.prototype.redo=function(){this.codeMirror_.redo()},c.prototype.insertEntity=function(a,b,c){this.richTextCodeMirror_.insertEntityAtCursor(a,b,c)},c.prototype.insertEntityAt=function(a,b,c,d){this.richTextCodeMirror_.insertEntityAt(a,b,c,d)},c.prototype.registerEntity=function(a,b){this.entityManager_.register(a,b)},c.prototype.getOption=function(a,b){return a in this.options_?this.options_[a]:b},c.prototype.assertReady_=function(a){if(!this.ready_)throw new Error(&#39;You must wait for the &quot;ready&quot; event before calling &#39;+a+&quot;.&quot;);if(this.zombie_)throw new Error(&quot;You can&#39;t use a Firepad after calling dispose()!  [called &quot;+a+&quot;]&quot;)},c.prototype.makeImageDialog_=function(){this.makeDialog_(&quot;fileButton&quot;,&quot;&quot;)},c.prototype.makeDialog_=function(a,b){var c=this,d=function(){var a=document.getElementById(&quot;overlay&quot;);a.style.visibility=&quot;hidden&quot;,c.firepadWrapper_.removeChild(a)},e=function(){var b=document.getElementById(&quot;overlay&quot;);b.style.visibility=&quot;hidden&quot;;var d=document.getElementById(a).value;null!==d&amp;&amp;c.insertEntity(a,{src:d}),c.firepadWrapper_.removeChild(b)},f=o.elt(&quot;input&quot;,null,{&quot;class&quot;:&quot;firepad-btn&quot;,id:a,type:&quot;file&quot;,placeholder:b,autofocus:&quot;autofocus&quot;}),g=o.elt(&quot;a&quot;,&quot;Submit&quot;,{&quot;class&quot;:&quot;firepad-btn&quot;,id:&quot;submitbtn&quot;,onClick:&#39;upload()&#39;});o.on(g,&quot;click&quot;,o.stopEventAnd(e));var h=o.elt(&quot;a&quot;,&quot;Cancel&quot;,{&quot;class&quot;:&quot;firepad-btn&quot;});o.on(h,&quot;click&quot;,o.stopEventAnd(d));var i=o.elt(&quot;div&quot;,[g,h],{&quot;class&quot;:&quot;firepad-btn-group&quot;}),j=o.elt(&quot;div&quot;,[f,i],{&quot;class&quot;:&quot;firepad-dialog-div&quot;}),k=o.elt(&quot;div&quot;,[j],{&quot;class&quot;:&quot;firepad-dialog&quot;,id:&quot;overlay&quot;});this.firepadWrapper_.appendChild(k)},c.prototype.addToolbar_=function(){this.toolbar=new i(this.imageInsertionUI),this.toolbar.on(&quot;undo&quot;,this.undo,this),this.toolbar.on(&quot;redo&quot;,this.redo,this),this.toolbar.on(&quot;bold&quot;,this.bold,this),this.toolbar.on(&quot;italic&quot;,this.italic,this),this.toolbar.on(&quot;underline&quot;,this.underline,this),this.toolbar.on(&quot;strike&quot;,this.strike,this),this.toolbar.on(&quot;font-size&quot;,this.fontSize,this),this.toolbar.on(&quot;font&quot;,this.font,this),this.toolbar.on(&quot;color&quot;,this.color,this),this.toolbar.on(&quot;left&quot;,function(){this.align(&quot;left&quot;)},this),this.toolbar.on(&quot;center&quot;,function(){this.align(&quot;center&quot;)},this),this.toolbar.on(&quot;right&quot;,function(){this.align(&quot;right&quot;)},this),this.toolbar.on(&quot;ordered-list&quot;,this.orderedList,this),this.toolbar.on(&quot;unordered-list&quot;,this.unorderedList,this),this.toolbar.on(&quot;todo-list&quot;,this.todo,this),this.toolbar.on(&quot;indent-increase&quot;,this.indent,this),this.toolbar.on(&quot;indent-decrease&quot;,this.unindent,this),this.toolbar.on(&quot;insert-image&quot;,this.makeImageDialog_,this),this.firepadWrapper_.insertBefore(this.toolbar.element(),this.firepadWrapper_.firstChild)},c.prototype.addPoweredByLogo_=function(){var a=o.elt(&quot;a&quot;,null,{&quot;class&quot;:&quot;&quot;});a.setAttribute(&quot;href&quot;,&quot;&quot;),a.setAttribute(&quot;target&quot;,&quot;_blank&quot;),this.firepadWrapper_.appendChild(a)},c.prototype.initializeKeyMap_=function(){function a(a){return function(b){setTimeout(function(){a.call(b.firepad)},0)}}p.keyMap.richtext={&quot;Ctrl-B&quot;:a(this.bold),&quot;Cmd-B&quot;:a(this.bold),&quot;Ctrl-I&quot;:a(this.italic),&quot;Cmd-I&quot;:a(this.italic),&quot;Ctrl-U&quot;:a(this.underline),&quot;Cmd-U&quot;:a(this.underline),&quot;Ctrl-H&quot;:a(this.highlight),&quot;Cmd-H&quot;:a(this.highlight),Enter:a(this.newline),Delete:a(this.deleteRight),Backspace:a(this.deleteLeft),Tab:a(this.indent),&quot;Shift-Tab&quot;:a(this.unindent),fallthrough:[&quot;default&quot;]}},c}(this),a.Firepad.Formatting=a.Formatting,a.Firepad.Text=a.Text,a.Firepad.Entity=a.Entity,a.Firepad.LineFormatting=a.LineFormatting,a.Firepad.Line=a.Line,a.Firepad.TextOperation=a.TextOperation,a.Firepad.Headless=a.Headless,a.Firepad.RichTextCodeMirrorAdapter=a.RichTextCodeMirrorAdapter,a.Firepad.ACEAdapter=a.ACEAdapter,a.Firepad},this);</td>
      </tr>
      <tr>
        <td id="L4" class="blob-num js-line-number" data-line-number="4"></td>
        <td id="LC4" class="blob-code blob-code-inner js-file-line"> </td>
      </tr>
</table>

  <details class="details-reset details-overlay BlobToolbar position-absolute js-file-line-actions dropdown d-none" aria-hidden="true">
    <summary class="btn-octicon ml-0 px-2 p-0 bg-white border border-gray-dark rounded-1" aria-label="Inline file action toolbar">
      <svg class="octicon octicon-kebab-horizontal" viewBox="0 0 13 16" version="1.1" width="13" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M1.5 9a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3zm5 0a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3zM13 7.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"/></svg>
    </summary>
    <details-menu>
      <ul class="BlobToolbar-dropdown dropdown-menu dropdown-menu-se mt-2" style="width:185px">
        <li><clipboard-copy role="menuitem" class="dropdown-item" id="js-copy-lines" style="cursor:pointer;" data-original-text="Copy lines">Copy lines</clipboard-copy></li>
        <li><clipboard-copy role="menuitem" class="dropdown-item" id="js-copy-permalink" style="cursor:pointer;" data-original-text="Copy permalink">Copy permalink</clipboard-copy></li>
        <li><a class="dropdown-item js-update-url-with-hash" id="js-view-git-blame" role="menuitem" href="/viveksenthilsj/citadel/blame/f51522d8009c5a5e9365a7bf44d02568154d750c/1.js">View git blame</a></li>
          <li><a class="dropdown-item" id="js-new-issue" role="menuitem" href="/viveksenthilsj/citadel/issues/new">Reference in new issue</a></li>
      </ul>
    </details-menu>
  </details>

  </div>

    </div>

  

  <details class="details-reset details-overlay details-overlay-dark">
    <summary data-hotkey="l" aria-label="Jump to line"></summary>
    <details-dialog class="Box Box--overlay d-flex flex-column anim-fade-in fast linejump" aria-label="Jump to line">
      <!-- '"` --><!-- </textarea></xmp> --></option></form><form class="js-jump-to-line-form Box-body d-flex" action="" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
        <input class="form-control flex-auto mr-3 linejump-input js-jump-to-line-field" type="text" placeholder="Jump to line&hellip;" aria-label="Jump to line" autofocus>
        <button type="submit" class="btn" data-close-dialog>Go</button>
</form>    </details-dialog>
  </details>



  </div>
  <div class="modal-backdrop js-touch-events"></div>
</div>

    </main>
  </div>
  

  </div>

        
<div class="footer container-lg width-full p-responsive" role="contentinfo">
  <div class="position-relative d-flex flex-row-reverse flex-lg-row flex-wrap flex-lg-nowrap flex-justify-center flex-lg-justify-between pt-6 pb-2 mt-6 f6 text-gray border-top border-gray-light ">
    <ul class="list-style-none d-flex flex-wrap col-12 col-lg-5 flex-justify-center flex-lg-justify-between mb-2 mb-lg-0">
      <li class="mr-3 mr-lg-0">&copy; 2019 <span title="0.20655s from unicorn-b8bbc6989-kkllb">GitHub</span>, Inc.</li>
        <li class="mr-3 mr-lg-0"><a data-ga-click="Footer, go to terms, text:terms" href="https://github.com/site/terms">Terms</a></li>
        <li class="mr-3 mr-lg-0"><a data-ga-click="Footer, go to privacy, text:privacy" href="https://github.com/site/privacy">Privacy</a></li>
        <li class="mr-3 mr-lg-0"><a data-ga-click="Footer, go to security, text:security" href="https://github.com/security">Security</a></li>
        <li class="mr-3 mr-lg-0"><a href="https://githubstatus.com/" data-ga-click="Footer, go to status, text:status">Status</a></li>
        <li><a data-ga-click="Footer, go to help, text:help" href="https://help.github.com">Help</a></li>
    </ul>

    <a aria-label="Homepage" title="GitHub" class="footer-octicon d-none d-lg-block mx-lg-4" href="https://github.com">
      <svg height="24" class="octicon octicon-mark-github" viewBox="0 0 16 16" version="1.1" width="24" aria-hidden="true"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"/></svg>
</a>
   <ul class="list-style-none d-flex flex-wrap col-12 col-lg-5 flex-justify-center flex-lg-justify-between mb-2 mb-lg-0">
        <li class="mr-3 mr-lg-0"><a data-ga-click="Footer, go to contact, text:contact" href="https://github.com/contact">Contact GitHub</a></li>
        <li class="mr-3 mr-lg-0"><a href="https://github.com/pricing" data-ga-click="Footer, go to Pricing, text:Pricing">Pricing</a></li>
      <li class="mr-3 mr-lg-0"><a href="https://developer.github.com" data-ga-click="Footer, go to api, text:api">API</a></li>
      <li class="mr-3 mr-lg-0"><a href="https://training.github.com" data-ga-click="Footer, go to training, text:training">Training</a></li>
        <li class="mr-3 mr-lg-0"><a href="https://github.blog" data-ga-click="Footer, go to blog, text:blog">Blog</a></li>
        <li><a data-ga-click="Footer, go to about, text:about" href="https://github.com/about">About</a></li>

    </ul>
  </div>
  <div class="d-flex flex-justify-center pb-6">
    <span class="f6 text-gray-light"></span>
  </div>
</div>



  <div id="ajax-error-message" class="ajax-error-message flash flash-error">
    <svg class="octicon octicon-alert" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"/></svg>
    <button type="button" class="flash-close js-ajax-error-dismiss" aria-label="Dismiss error">
      <svg class="octicon octicon-x" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.48 8l3.75 3.75-1.48 1.48L6 9.48l-3.75 3.75-1.48-1.48L4.52 8 .77 4.25l1.48-1.48L6 6.52l3.75-3.75 1.48 1.48L7.48 8z"/></svg>
    </button>
    You can’t perform that action at this time.
  </div>


    <script crossorigin="anonymous" integrity="sha512-BlCvumXWTvpASEdhCGiahDUDf7Bwb8QXA2XnnSnqJ9QafxcNcrNYUNYS2wXmd3nEpO//+zlZa9DSV9zmu5MqRg==" type="application/javascript" src="https://github.githubassets.com/assets/compat-bootstrap-90c0ace0.js"></script>
    <script crossorigin="anonymous" integrity="sha512-g8y61ukpuxDEU1w0B8AaXzCoZO9ZV7aUNRgrgUpMNaHulIZN5RB/pxmSXMScAroJfjz4IQFOfAZXod3O+htchg==" type="application/javascript" src="https://github.githubassets.com/assets/frameworks-341d995f.js"></script>
    
    <script crossorigin="anonymous" async="async" integrity="sha512-nWnoUeKrGoM2pM/rLqZn/tolJjPX4nYPzlgNe2vR8Qfy0VS4LlzTwf6oiN7zmQqjswJ8/0c5LRLbd9ZQ7+NUtQ==" type="application/javascript" src="https://github.githubassets.com/assets/github-bootstrap-6b12f7d4.js"></script>
    
    
    
  <div class="js-stale-session-flash stale-session-flash flash flash-warn flash-banner" hidden
    >
    <svg class="octicon octicon-alert" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"/></svg>
    <span class="signed-in-tab-flash">You signed in with another tab or window. <a href="">Reload</a> to refresh your session.</span>
    <span class="signed-out-tab-flash">You signed out in another tab or window. <a href="">Reload</a> to refresh your session.</span>
  </div>
  <template id="site-details-dialog">
  <details class="details-reset details-overlay details-overlay-dark lh-default text-gray-dark hx_rsm" open>
    <summary role="button" aria-label="Close dialog"></summary>
    <details-dialog class="Box Box--overlay d-flex flex-column anim-fade-in fast hx_rsm-dialog hx_rsm-modal">
      <button class="Box-btn-octicon m-0 btn-octicon position-absolute right-0 top-0" type="button" aria-label="Close dialog" data-close-dialog>
        <svg class="octicon octicon-x" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.48 8l3.75 3.75-1.48 1.48L6 9.48l-3.75 3.75-1.48-1.48L4.52 8 .77 4.25l1.48-1.48L6 6.52l3.75-3.75 1.48 1.48L7.48 8z"/></svg>
      </button>
      <div class="octocat-spinner my-6 js-details-dialog-spinner"></div>
    </details-dialog>
  </details>
</template>

  <div class="Popover js-hovercard-content position-absolute" style="display: none; outline: none;" tabindex="0">
  <div class="Popover-message Popover-message--bottom-left Popover-message--large Box box-shadow-large" style="width:360px;">
  </div>
</div>

  <div aria-live="polite" class="js-global-screen-reader-notice sr-only"></div>

  </body>
</html>

